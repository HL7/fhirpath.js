tests:
  - 'group: defineVariable tests':
      - desc: '** simplest variable'
        inputfile: patient-example.json
        expression: 'defineVariable(''v1'', ''value1'').select(%v1)'
        result:
          - value1
        model: r5
      - desc: '** simple use of a variable'
        inputfile: patient-example.json
        expression: 'defineVariable(''n1'', name.first()).select(%n1.given)'
        result:
          - Peter
          - James
        model: r5
      - desc: '** simple use of a variable 2 selects'
        inputfile: patient-example.json
        expression: 'defineVariable(''n1'', name.first()).select(%n1.given).first()'
        result:
          - Peter
        model: r5
      - desc: '** use of a variable in separate contexts'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', name.first()).select(%n1.given) |
          defineVariable('n1', name.skip(1).first()).select(%n1.given)
        result:
          - Peter
          - James
          - Jim
        model: r5
      - desc: '** use of a variable in separate contexts defined in 2 but used in 1'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', name.first()).where(active.not()) |
          defineVariable('n1', name.skip(1).first()).select(%n1.given)
        result:
          - Jim
        model: r5
      - desc: '** use of different variables in different contexts'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', name.first()).select(id & '-' &
          %n1.given.join('|')) | defineVariable('n2',
          name.skip(1).first()).select(%n2.given)
        result:
          - example-Peter|James
          - Jim
        model: r5
      - desc: '** 2 vars, one unused'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', name.first()).active | defineVariable('n2',
          name.skip(1).first()).select(%n2.given)
        result:
          - true
          - Jim
        model: r5
      - desc: '** CompositeVariableUse'
        inputfile: patient-example.json
        expression: >-
          defineVariable('v1',
          'value1').select(%v1).trace('data').defineVariable('v2',
          'value2').select($this & ':' & %v1 & '-' & %v2) | defineVariable('v3',
          'value3').select(%v3)
        result:
          - 'value1:value1-value2'
          - value3
        model: r5
      - desc: '** use of a variable outside context throws error'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', name.first()).active | defineVariable('n2',
          name.skip(1).first()).select(%n1.given)
        error: true
        model: r5
      - desc: '** use undefined variable throws error'
        inputfile: patient-example.json
        expression: select(%fam.given)
        error: true
        model: r5
      - desc: '** dvRedefiningVariableThrowsError'
        inputfile: patient-example.json
        expression: defineVariable('v1').defineVariable('v1').select(%v1)
        error: true
        model: r5
      - desc: '** defineVariable() could not be the first child'
        inputfile: patient-example.json
        expression: >-
          Patient.name.defineVariable('n1', first()).active |
          Patient.name.defineVariable('n2', skip(1).first()).select(%n1.given)
        error: true
        model: r5
      - desc: '** sequence of variable definitions tweak'
        inputfile: patient-example.json
        expression: >-
          Patient.name.defineVariable('n2',
          skip(1).first()).defineVariable('res',
          %n2.given+%n2.given).select(%res)
        result:
          - JimJim
          - JimJim
          - JimJim
        model: r5
      - desc: '** sequence of variable definitions original'
        inputfile: patient-example.json
        expression: >-
          Patient.name.defineVariable('n1', first()).select(%n1).exists() |
          Patient.name.defineVariable('n2',
          skip(1).first()).defineVariable('res',
          %n2.given+%n2.given).select(%res)
        result:
          - true
          - JimJim
        model: r5
      - desc: '** multi-tree vars valid'
        inputfile: patient-example.json
        expression: >-
          defineVariable('root', 'r1-').select(defineVariable('v1',
          'v1').defineVariable('v2', 'v2').select(%v1 | %v2)).select(%root &
          $this)
        result:
          - r1-v1
          - r1-v2
        model: r5
      - desc: '** multi-tree vars exception'
        inputfile: patient-example.json
        expression: >-
          defineVariable('root', 'r1-').select(defineVariable('v1',
          'v1').defineVariable('v2', 'v2').select(%v1 | %v2)).select(%root &
          $this & %v1)
        error: true
        model: r5
      - desc: '** dvCantOverwriteSystemVar'
        inputfile: patient-example.json
        expression: 'defineVariable(''context'', ''oops'')'
        error: true
        model: r5
      - desc: '** realistic example with conceptmap'
        inputfile: conceptmap-example.json
        expression: "\n\t\t\tgroup.select(\n\t\t\t\tdefineVariable('grp')\n\t\t\t\t.element\n\t\t\t\t.select(\n\t\t\t\t\tdefineVariable('ele')\n\t\t\t\t\t.target\n\t\t\t\t\t.select(%grp.source & '|' & %ele.code & ' ' & relationship & ' ' & %grp.target & '|' & code)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.trace('all')\n\t\t\t.isDistinct()\n\t\t"
        result:
          - false
        model: r5
      - desc: '** defineVariable in function parameters (1)'
        inputfile: patient-example.json
        expression: >-
          defineVariable(defineVariable('param','ppp').select(%param),
          defineVariable('param','value').select(%param)).select(%ppp)
        result:
          - value
        model: r5
      - desc: '** defineVariable in function parameters (2)'
        inputfile: patient-example.json
        expression: >-
          'aaa'.replace(defineVariable('param', 'aaa').select(%param),
          defineVariable('param','bbb').select(%param))
        result:
          - bbb
        model: r5
      - desc: '** use of a variable outside context throws error'
        inputfile: patient-example.json
        expression: >-
          defineVariable('n1', 'v1').active | defineVariable('n2',
          'v2').select(%n1)
        error: true
        model: r5
  - 'group: Check various comment syntaxes':
      - desc: '** testComment1'
        inputfile: patient-example.json
        expression: 2 + 2 // This is a single-line comment + 4
        result:
          - 4
        model: r5
      - desc: '** testComment2'
        inputfile: patient-example.json
        expression: |-
          // This is a multi line comment using // that
            // should not fail during parsing
            2+2
        result:
          - 4
        model: r5
      - desc: '** testComment3'
        inputfile: patient-example.json
        expression: |-
          2 + 2 
                /*
          This is a multi-line comment
          Any text enclosed within is ignored
          +2
          */
        result:
          - 4
        model: r5
      - desc: '** testComment4'
        inputfile: patient-example.json
        expression: |-
          2 + 2 
                /*
          This is a multi-line comment
          Any text enclosed within is ignored
          */
          +2
        result:
          - 6
        model: r5
      - desc: '** testComment5'
        inputfile: patient-example.json
        expression: |-
          /*
          This is a multi-line comment
          Any text enclosed within is ignored
          */
          2+2
        result:
          - 4
        model: r5
      - desc: '** testComment6'
        inputfile: patient-example.json
        expression: |-
          2 // comment
          / 2
        result:
          - 1
        model: r5
      - desc: '** testComment7'
        inputfile: patient-example.json
        expression: 2 + 2 /
        error: true
        model: r5
      - desc: '** testComment8'
        inputfile: patient-example.json
        expression: 2 + 2 /* not finished
        error: true
        model: r5
      - desc: '** testComment9'
        inputfile: patient-example.json
        expression: 2 + /* inline $@%^+ * */ 2 = 4
        result:
          - true
        model: r5
  - 'group: Miscellaneous accessor tests':
      - desc: '** Extract birthDate'
        inputfile: patient-example.json
        expression: birthDate
        result:
          - '1974-12-25'
        model: r5
      - desc: '** patient has a birthDate'
        inputfile: patient-example.json
        expression: birthDate
        result:
          - true
        model: r5
        disable: true
      - desc: '** patient telecom types'
        inputfile: patient-example.json
        expression: telecom.use
        result:
          - home
          - work
          - mobile
          - old
        model: r5
  - 'group: Tests ported from the Java Unit Tests':
      - desc: '** testSimple'
        inputfile: patient-example.json
        expression: name.given
        result:
          - Peter
          - James
          - Jim
          - Peter
          - James
        model: r5
      - desc: '** testSimpleNone'
        inputfile: patient-example.json
        expression: name.suffix
        model: r5
        result: []
      - desc: '** testEscapedIdentifier'
        inputfile: patient-example.json
        expression: name.`given`
        result:
          - Peter
          - James
          - Jim
          - Peter
          - James
        model: r5
      - desc: '** testSimpleBackTick1'
        inputfile: patient-example.json
        expression: '`Patient`.name.`given`'
        result:
          - Peter
          - James
          - Jim
          - Peter
          - James
        model: r5
      - desc: '** testSimpleFail'
        inputfile: patient-example.json
        expression: name.given1
        error: true
        model: r5
        disable: true
      - desc: '** testSimpleWithContext'
        inputfile: patient-example.json
        expression: Patient.name.given
        result:
          - Peter
          - James
          - Jim
          - Peter
          - James
        model: r5
      - desc: '** testSimpleWithWrongContext'
        inputfile: patient-example.json
        expression: Encounter.name.given
        error: true
        model: r5
        disable: true
  - 'group: testObservations':
      - desc: '** testPolymorphismA'
        inputfile: observation-example.json
        expression: Observation.value.unit
        result:
          - lbs
        model: r5
      - desc: '** testPolymorphismB'
        inputfile: observation-example.json
        expression: Observation.valueQuantity.unit
        error: true
        model: r5
        disable: true
      - desc: '** testPolymorphismIsA1'
        inputfile: observation-example.json
        expression: Observation.value.is(Quantity)
        result:
          - true
        model: r5
      - desc: '** testPolymorphismIsA2'
        inputfile: observation-example.json
        expression: Observation.value is Quantity
        result:
          - true
        model: r5
      - desc: '** testPolymorphismIsA3'
        inputfile: observation-example.json
        expression: Observation.issued is instant
        model: r5
        result: []
      - desc: '** testPolymorphismIsB'
        inputfile: observation-example.json
        expression: Observation.value.is(Period).not()
        result:
          - true
        model: r5
      - desc: '** testPolymorphismAsA'
        inputfile: observation-example.json
        expression: Observation.value.as(Quantity).unit
        result:
          - lbs
        model: r5
      - desc: '** testPolymorphismAsAFunction'
        inputfile: observation-example.json
        expression: (Observation.value as Quantity).unit
        result:
          - lbs
        model: r5
      - desc: '** testPolymorphismAsB'
        inputfile: observation-example.json
        expression: (Observation.value as Period).unit
        error: true
        model: r5
        disable: true
      - desc: '** testPolymorphismAsBFunction'
        inputfile: observation-example.json
        expression: Observation.value.as(Period).start
        model: r5
        result: []
  - 'group: testDollar':
      - desc: '** testDollarThis1'
        inputfile: patient-example.json
        expression: Patient.name.given.where(substring($this.length()-3) = 'out')
        model: r5
        result: []
      - desc: '** testDollarThis2'
        inputfile: patient-example.json
        expression: Patient.name.given.where(substring($this.length()-3) = 'ter')
        result:
          - Peter
          - Peter
        model: r5
      - desc: '** testDollarOrderAllowed'
        inputfile: patient-example.json
        expression: Patient.name.skip(1).given
        result:
          - Jim
          - Peter
          - James
        model: r5
      - desc: '** testDollarOrderAllowedA'
        inputfile: patient-example.json
        expression: Patient.name.skip(3).given
        model: r5
        result: []
      - desc: '** testDollarOrderNotAllowed'
        inputfile: patient-example.json
        expression: Patient.children().skip(1)
        error: true
        model: r5
        disable: true
  - 'group: testLiterals':
      - desc: '** testLiteralTrue'
        inputfile: patient-example.json
        expression: Patient.name.exists() = true
        result:
          - true
        model: r5
      - desc: '** testLiteralFalse'
        inputfile: patient-example.json
        expression: Patient.name.empty() = false
        result:
          - true
        model: r5
      - desc: '** testLiteralString1'
        inputfile: patient-example.json
        expression: Patient.name.given.first() = 'Peter'
        result:
          - true
        model: r5
      - desc: '** testLiteralInteger1'
        inputfile: patient-example.json
        expression: 1.convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testLiteralInteger0'
        inputfile: patient-example.json
        expression: 0.convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerNegative1'
        inputfile: patient-example.json
        expression: (-1).convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerNegative1Invalid'
        inputfile: patient-example.json
        expression: '-1.convertsToInteger()'
        error: true
        model: r5
      - desc: '** testLiteralIntegerMax'
        inputfile: patient-example.json
        expression: 2147483647.convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testLiteralString2'
        inputfile: patient-example.json
        expression: '''test''.convertsToString()'
        result:
          - true
        model: r5
      - desc: '** testLiteralStringEscapes'
        inputfile: patient-example.json
        expression: '''\\\/\f\r\n\t\"\`\''\u002a''.convertsToString()'
        result:
          - true
        model: r5
      - desc: '** testLiteralBooleanTrue'
        inputfile: patient-example.json
        expression: true.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testLiteralBooleanFalse'
        inputfile: patient-example.json
        expression: false.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimal10'
        inputfile: patient-example.json
        expression: 1.0.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimal01'
        inputfile: patient-example.json
        expression: 0.1.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimal00'
        inputfile: patient-example.json
        expression: 0.0.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalNegative01'
        inputfile: patient-example.json
        expression: (-0.1).convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalNegative01Invalid'
        inputfile: patient-example.json
        expression: '-0.1.convertsToDecimal()'
        error: true
        model: r5
      - desc: '** testLiteralDecimalMax'
        inputfile: patient-example.json
        expression: 1234567890987654321.0.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalStep'
        inputfile: patient-example.json
        expression: 0.00000001.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testLiteralDateYear'
        inputfile: patient-example.json
        expression: '@2015.is(Date)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateMonth'
        inputfile: patient-example.json
        expression: '@2015-02.is(Date)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateDay'
        inputfile: patient-example.json
        expression: '@2015-02-04.is(Date)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeYear'
        inputfile: patient-example.json
        expression: '@2015T.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeMonth'
        inputfile: patient-example.json
        expression: '@2015-02T.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeDay'
        inputfile: patient-example.json
        expression: '@2015-02-04T.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeHour'
        inputfile: patient-example.json
        expression: '@2015-02-04T14.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeMinute'
        inputfile: patient-example.json
        expression: '@2015-02-04T14:34.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeSecond'
        inputfile: patient-example.json
        expression: '@2015-02-04T14:34:28.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeMillisecond'
        inputfile: patient-example.json
        expression: '@2015-02-04T14:34:28.123.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeUTC'
        inputfile: patient-example.json
        expression: '@2015-02-04T14:34:28Z.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeTimezoneOffset'
        inputfile: patient-example.json
        expression: '@2015-02-04T14:34:28+10:00.is(DateTime)'
        result:
          - true
        model: r5
      - desc: '** testLiteralTimeHour'
        inputfile: patient-example.json
        expression: '@T14.is(Time)'
        result:
          - true
        model: r5
      - desc: '** testLiteralTimeMinute'
        inputfile: patient-example.json
        expression: '@T14:34.is(Time)'
        result:
          - true
        model: r5
      - desc: '** testLiteralTimeSecond'
        inputfile: patient-example.json
        expression: '@T14:34:28.is(Time)'
        result:
          - true
        model: r5
      - desc: '** testLiteralTimeMillisecond'
        inputfile: patient-example.json
        expression: '@T14:34:28.123.is(Time)'
        result:
          - true
        model: r5
      - desc: '** testLiteralTimeUTC'
        inputfile: patient-example.json
        expression: '@T14:34:28Z.is(Time)'
        error: true
        model: r5
      - desc: '** testLiteralTimeTimezoneOffset'
        inputfile: patient-example.json
        expression: '@T14:34:28+10:00.is(Time)'
        error: true
        model: r5
      - desc: '** testLiteralQuantityDecimal'
        inputfile: patient-example.json
        expression: 10.1 'mg'.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testLiteralQuantityInteger'
        inputfile: patient-example.json
        expression: 10 'mg'.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testLiteralQuantityDay'
        inputfile: patient-example.json
        expression: 4 days.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerNotEqual'
        inputfile: patient-example.json
        expression: '-3 != 3'
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerEqual'
        inputfile: patient-example.json
        expression: Patient.name.given.count() = 5
        result:
          - true
        model: r5
      - desc: '** testPolarityPrecedence'
        inputfile: patient-example.json
        expression: '-Patient.name.given.count() = -5'
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerGreaterThan'
        inputfile: patient-example.json
        expression: Patient.name.given.count() > -3
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerCountNotEqual'
        inputfile: patient-example.json
        expression: Patient.name.given.count() != 0
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerLessThanTrue'
        inputfile: patient-example.json
        expression: 1 < 2
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerLessThanFalse'
        inputfile: patient-example.json
        expression: 1 < -2
        result:
          - false
        model: r5
      - desc: '** testLiteralIntegerLessThanPolarityTrue'
        inputfile: patient-example.json
        expression: +1 < +2
        result:
          - true
        model: r5
      - desc: '** testLiteralIntegerLessThanPolarityFalse'
        inputfile: patient-example.json
        expression: '-1 < 2'
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalGreaterThanNonZeroTrue'
        inputfile: observation-example.json
        expression: Observation.value.value > 180.0
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalGreaterThanZeroTrue'
        inputfile: observation-example.json
        expression: Observation.value.value > 0.0
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalGreaterThanIntegerTrue'
        inputfile: observation-example.json
        expression: Observation.value.value > 0
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalLessThanInteger'
        inputfile: observation-example.json
        expression: Observation.value.value < 190
        result:
          - true
        model: r5
      - desc: '** testLiteralDecimalLessThanInvalid'
        inputfile: observation-example.json
        expression: Observation.value.value < 'test'
        error: true
        model: r5
      - desc: '** testDateEqual'
        inputfile: patient-example.json
        expression: Patient.birthDate = @1974-12-25
        result:
          - true
        model: r5
      - desc: '** testDateNotEqual'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @1974-12-25T12:34:00'
        model: r5
        result: []
      - desc: '** testDateNotEqualTimezoneOffsetBefore'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @1974-12-25T12:34:00-10:00'
        model: r5
        result: []
      - desc: '** testDateNotEqualTimezoneOffsetAfter'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @1974-12-25T12:34:00+10:00'
        model: r5
        result: []
      - desc: '** testDateNotEqualUTC'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @1974-12-25T12:34:00Z'
        model: r5
        result: []
      - desc: '** testDateNotEqualTimeSecond'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @T12:14:15'
        result:
          - true
        model: r5
      - desc: '** testDateNotEqualTimeMinute'
        inputfile: patient-example.json
        expression: 'Patient.birthDate != @T12:14'
        result:
          - true
        model: r5
      - desc: '** testDateNotEqualToday'
        inputfile: patient-example.json
        expression: Patient.birthDate < today()
        result:
          - true
        model: r5
      - desc: '** testDateTimeGreaterThanDate1'
        inputfile: patient-example.json
        expression: now() > Patient.birthDate
        result:
          - true
        model: r5
      - desc: '** testDateGreaterThanDate'
        inputfile: patient-example.json
        expression: today() > Patient.birthDate
        result:
          - true
        model: r5
      - desc: '** testDateTimeGreaterThanDate2'
        inputfile: patient-example.json
        expression: now() > today()
        model: r5
        result: []
      - desc: '** testLiteralDateTimeTZGreater'
        inputfile: patient-example.json
        expression: '@2017-11-05T01:30:00.0-04:00 > @2017-11-05T01:15:00.0-05:00'
        result:
          - false
        model: r5
      - desc: '** testLiteralDateTimeTZLess'
        inputfile: patient-example.json
        expression: '@2017-11-05T01:30:00.0-04:00 < @2017-11-05T01:15:00.0-05:00'
        result:
          - true
        model: r5
      - desc: '** testLiteralDateTimeTZEqualFalse'
        inputfile: patient-example.json
        expression: '@2017-11-05T01:30:00.0-04:00 = @2017-11-05T01:15:00.0-05:00'
        result:
          - false
        model: r5
      - desc: '** testLiteralDateTimeTZEqualTrue'
        inputfile: patient-example.json
        expression: '@2017-11-05T01:30:00.0-04:00 = @2017-11-05T00:30:00.0-05:00'
        result:
          - true
        model: r5
      - desc: '** testLiteralUnicode'
        inputfile: patient-example.json
        expression: Patient.name.given.first() = 'P\u0065ter'
        result:
          - true
        model: r5
      - desc: '** testCollectionNotEmpty'
        inputfile: patient-example.json
        expression: Patient.name.given.empty().not()
        result:
          - true
        model: r5
      - desc: '** testCollectionNotEqualEmpty'
        inputfile: patient-example.json
        expression: 'Patient.name.given != {}'
        model: r5
        result: []
      - desc: '** testExpressions'
        inputfile: patient-example.json
        expression: Patient.name.select(given | family).distinct()
        result:
          - Peter
          - James
          - Chalmers
          - Jim
          - Windsor
        model: r5
      - desc: '** testExpressionsEqual'
        inputfile: patient-example.json
        expression: Patient.name.given.count() = 1 + 4
        result:
          - true
        model: r5
      - desc: '** testNotEmpty'
        inputfile: patient-example.json
        expression: Patient.name.empty().not()
        result:
          - true
        model: r5
      - desc: '** testEmpty'
        inputfile: patient-example.json
        expression: Patient.link.empty()
        result:
          - true
        model: r5
      - desc: '** testLiteralNotOnEmpty'
        inputfile: patient-example.json
        expression: '{}.not().empty()'
        result:
          - true
        model: r5
      - desc: '** testLiteralNotTrue'
        inputfile: patient-example.json
        expression: true.not() = false
        result:
          - true
        model: r5
      - desc: '** testLiteralNotFalse'
        inputfile: patient-example.json
        expression: false.not() = true
        result:
          - true
        model: r5
      - desc: '** testIntegerBooleanNotTrue'
        inputfile: patient-example.json
        expression: (0).not() = false
        result:
          - true
        model: r5
      - desc: '** testIntegerBooleanNotFalse'
        inputfile: patient-example.json
        expression: (1).not() = false
        result:
          - true
        model: r5
      - desc: '** testNotInvalid'
        inputfile: patient-example.json
        expression: (1|2).not() = false
        error: true
        model: r5
  - 'group: testTypes':
      - desc: '** testStringYearConvertsToDate'
        inputfile: patient-example.json
        expression: '''2015''.convertsToDate()'
        result:
          - true
        model: r5
      - desc: '** testStringMonthConvertsToDate'
        inputfile: patient-example.json
        expression: '''2015-02''.convertsToDate()'
        result:
          - true
        model: r5
      - desc: '** testStringDayConvertsToDate'
        inputfile: patient-example.json
        expression: '''2015-02-04''.convertsToDate()'
        result:
          - true
        model: r5
      - desc: '** testStringYearConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringMonthConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringDayConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringHourConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringMinuteConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14:34''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringSecondConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14:34:28''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringMillisecondConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14:34:28.123''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringUTCConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14:34:28Z''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringTZConvertsToDateTime'
        inputfile: patient-example.json
        expression: '''2015-02-04T14:34:28+10:00''.convertsToDateTime()'
        result:
          - true
        model: r5
      - desc: '** testStringHourConvertsToTime'
        inputfile: patient-example.json
        expression: '''14''.convertsToTime()'
        result:
          - true
        model: r5
      - desc: '** testStringMinuteConvertsToTime'
        inputfile: patient-example.json
        expression: '''14:34''.convertsToTime()'
        result:
          - true
        model: r5
      - desc: '** testStringSecondConvertsToTime'
        inputfile: patient-example.json
        expression: '''14:34:28''.convertsToTime()'
        result:
          - true
        model: r5
      - desc: '** testStringMillisecondConvertsToTime'
        inputfile: patient-example.json
        expression: '''14:34:28.123''.convertsToTime()'
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralConvertsToInteger'
        inputfile: patient-example.json
        expression: 1.convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralIsInteger'
        inputfile: patient-example.json
        expression: 1.is(Integer)
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralIsSystemInteger'
        inputfile: patient-example.json
        expression: 1.is(System.Integer)
        result:
          - true
        model: r5
      - desc: '** testStringLiteralConvertsToInteger'
        inputfile: patient-example.json
        expression: '''1''.convertsToInteger()'
        result:
          - true
        model: r5
      - desc: '** testStringLiteralConvertsToIntegerFalse'
        inputfile: patient-example.json
        expression: '''a''.convertsToInteger().not()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalConvertsToIntegerFalse'
        inputfile: patient-example.json
        expression: '''1.0''.convertsToInteger().not()'
        result:
          - true
        model: r5
      - desc: '** testStringLiteralIsNotInteger'
        inputfile: patient-example.json
        expression: '''1''.is(Integer).not()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralConvertsToInteger'
        inputfile: patient-example.json
        expression: true.convertsToInteger()
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralIsNotInteger'
        inputfile: patient-example.json
        expression: true.is(Integer).not()
        result:
          - true
        model: r5
      - desc: '** testDateIsNotInteger'
        inputfile: patient-example.json
        expression: '@2013-04-05.is(Integer).not()'
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToInteger'
        inputfile: patient-example.json
        expression: 1.toInteger() = 1
        result:
          - true
        model: r5
      - desc: '** testStringIntegerLiteralToInteger'
        inputfile: patient-example.json
        expression: '''1''.toInteger() = 1'
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralToInteger'
        inputfile: patient-example.json
        expression: '''1.1''.toInteger() = {}'
        model: r5
        result: []
      - desc: '** testDecimalLiteralToIntegerIsEmpty'
        inputfile: patient-example.json
        expression: '''1.1''.toInteger().empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralToInteger'
        inputfile: patient-example.json
        expression: true.toInteger() = 1
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralConvertsToDecimal'
        inputfile: patient-example.json
        expression: 1.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralIsNotDecimal'
        inputfile: patient-example.json
        expression: 1.is(Decimal).not()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralConvertsToDecimal'
        inputfile: patient-example.json
        expression: 1.0.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralIsDecimal'
        inputfile: patient-example.json
        expression: 1.0.is(Decimal)
        result:
          - true
        model: r5
        disable: true
      - desc: '** testStringIntegerLiteralConvertsToDecimal'
        inputfile: patient-example.json
        expression: '''1''.convertsToDecimal()'
        result:
          - true
        model: r5
      - desc: '** testStringIntegerLiteralIsNotDecimal'
        inputfile: patient-example.json
        expression: '''1''.is(Decimal).not()'
        result:
          - true
        model: r5
      - desc: '** testStringLiteralConvertsToDecimalFalse'
        inputfile: patient-example.json
        expression: '''1.a''.convertsToDecimal().not()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalLiteralConvertsToDecimal'
        inputfile: patient-example.json
        expression: '''1.0''.convertsToDecimal()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalLiteralIsNotDecimal'
        inputfile: patient-example.json
        expression: '''1.0''.is(Decimal).not()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralConvertsToDecimal'
        inputfile: patient-example.json
        expression: true.convertsToDecimal()
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralIsNotDecimal'
        inputfile: patient-example.json
        expression: true.is(Decimal).not()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToDecimal'
        inputfile: patient-example.json
        expression: 1.toDecimal() = 1.0
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToDeciamlEquivalent'
        inputfile: patient-example.json
        expression: 1.toDecimal() ~ 1.0
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralToDecimal'
        inputfile: patient-example.json
        expression: 1.0.toDecimal() = 1.0
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralToDecimalEqual'
        inputfile: patient-example.json
        expression: '''1.1''.toDecimal() = 1.1'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralToDecimal'
        inputfile: patient-example.json
        expression: true.toDecimal() = 1
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: 1.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralIsNotQuantity'
        inputfile: patient-example.json
        expression: 1.is(Quantity).not()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: 1.0.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralIsNotQuantity'
        inputfile: patient-example.json
        expression: 1.0.is(System.Quantity).not()
        result:
          - true
        model: r5
      - desc: '** testStringIntegerLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: '''1''.convertsToQuantity()'
        result:
          - true
        model: r5
      - desc: '** testStringIntegerLiteralIsNotQuantity'
        inputfile: patient-example.json
        expression: '''1''.is(System.Quantity).not()'
        result:
          - true
        model: r5
      - desc: '** testStringQuantityLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: '''1 day''.convertsToQuantity()'
        result:
          - true
        model: r5
      - desc: '** testStringQuantityWeekConvertsToQuantity'
        inputfile: patient-example.json
        expression: '''1 \''wk\''''.convertsToQuantity()'
        result:
          - true
        model: r5
      - desc: '** testStringQuantityWeekConvertsToQuantityFalse'
        inputfile: patient-example.json
        expression: '''1 wk''.convertsToQuantity().not()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalLiteralConvertsToQuantityFalse'
        inputfile: patient-example.json
        expression: '''1.a''.convertsToQuantity().not()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: '''1.0''.convertsToQuantity()'
        result:
          - true
        model: r5
      - desc: '** testStringDecimalLiteralIsNotSystemQuantity'
        inputfile: patient-example.json
        expression: '''1.0''.is(System.Quantity).not()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralConvertsToQuantity'
        inputfile: patient-example.json
        expression: true.convertsToQuantity()
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralIsNotSystemQuantity'
        inputfile: patient-example.json
        expression: true.is(System.Quantity).not()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToQuantity'
        inputfile: patient-example.json
        expression: 1.toQuantity() = 1 '1'
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralToQuantity'
        inputfile: patient-example.json
        expression: 1.0.toQuantity() = 1.0 '1'
        result:
          - true
        model: r5
      - desc: '** testStringIntegerLiteralToQuantity'
        inputfile: patient-example.json
        expression: '''1''.toQuantity()'
        result:
          - 1 '1'
        model: r5
      - desc: '** testStringQuantityLiteralToQuantity'
        inputfile: patient-example.json
        expression: '''1 day''.toQuantity() = 1 day'
        result:
          - true
        model: r5
      - desc: '** testStringQuantityDayLiteralToQuantity'
        inputfile: patient-example.json
        expression: '''1 day''.toQuantity() = 1 ''d'''
        result:
          - true
        model: r5
        disable: true
      - desc: '** testStringQuantityWeekLiteralToQuantity'
        inputfile: patient-example.json
        expression: '''1 \''wk\''''.toQuantity() = 1 week'
        result:
          - true
        model: r5
        disable: true
      - desc: '** testStringQuantityMonthLiteralToQuantity'
        expression: '''1 \''mo\''''.toQuantity() = 1 month'
        model: r5
        result: []
      - desc: '** testStringQuantityYearLiteralToQuantity'
        expression: '''1 \''a\''''.toQuantity() = 1 year'
        model: r5
        result: []
      - desc: '** testStringDecimalLiteralToQuantity'
        inputfile: patient-example.json
        expression: '''1.0''.toQuantity() ~ 1 ''1'''
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: 1.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralConvertsToBooleanFalse'
        inputfile: patient-example.json
        expression: 2.convertsToBoolean()
        result:
          - false
        model: r5
      - desc: '** testNegativeIntegerLiteralConvertsToBooleanFalse'
        inputfile: patient-example.json
        expression: (-1).convertsToBoolean()
        result:
          - false
        model: r5
      - desc: '** testIntegerLiteralFalseConvertsToBoolean'
        inputfile: patient-example.json
        expression: 0.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: 1.0.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testStringTrueLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: '''true''.convertsToBoolean()'
        result:
          - true
        model: r5
      - desc: '** testStringFalseLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: '''false''.convertsToBoolean()'
        result:
          - true
        model: r5
      - desc: '** testStringFalseLiteralAlsoConvertsToBoolean'
        inputfile: patient-example.json
        expression: '''False''.convertsToBoolean()'
        result:
          - true
        model: r5
      - desc: '** testTrueLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: true.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testFalseLiteralConvertsToBoolean'
        inputfile: patient-example.json
        expression: false.convertsToBoolean()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToBoolean'
        inputfile: patient-example.json
        expression: 1.toBoolean()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToBooleanEmpty'
        inputfile: patient-example.json
        expression: 2.toBoolean()
        model: r5
        result: []
      - desc: '** testIntegerLiteralToBooleanFalse'
        inputfile: patient-example.json
        expression: 0.toBoolean()
        result:
          - false
        model: r5
      - desc: '** testStringTrueToBoolean'
        inputfile: patient-example.json
        expression: '''true''.toBoolean()'
        result:
          - true
        model: r5
      - desc: '** testStringFalseToBoolean'
        inputfile: patient-example.json
        expression: '''false''.toBoolean()'
        result:
          - false
        model: r5
      - desc: '** testIntegerLiteralConvertsToString'
        inputfile: patient-example.json
        expression: 1.convertsToString()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralIsNotString'
        inputfile: patient-example.json
        expression: 1.is(String).not()
        result:
          - true
        model: r5
      - desc: '** testNegativeIntegerLiteralConvertsToString'
        inputfile: patient-example.json
        expression: (-1).convertsToString()
        result:
          - true
        model: r5
      - desc: '** testDecimalLiteralConvertsToString'
        inputfile: patient-example.json
        expression: 1.0.convertsToString()
        result:
          - true
        model: r5
      - desc: '** testStringLiteralConvertsToString'
        inputfile: patient-example.json
        expression: '''true''.convertsToString()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLiteralConvertsToString'
        inputfile: patient-example.json
        expression: true.convertsToString()
        result:
          - true
        model: r5
      - desc: '** testQuantityLiteralConvertsToString'
        inputfile: patient-example.json
        expression: 1 'wk'.convertsToString()
        result:
          - true
        model: r5
      - desc: '** testIntegerLiteralToString'
        inputfile: patient-example.json
        expression: 1.toString()
        result:
          - '1'
        model: r5
      - desc: '** testNegativeIntegerLiteralToString'
        inputfile: patient-example.json
        expression: (-1).toString()
        result:
          - '-1'
        model: r5
      - desc: '** testDecimalLiteralToString'
        inputfile: patient-example.json
        expression: 1.0.toString()
        result:
          - '1.0'
        model: r5
        disable: true
      - desc: '** testStringLiteralToString'
        inputfile: patient-example.json
        expression: '''true''.toString()'
        result:
          - 'true'
        model: r5
      - desc: '** testBooleanLiteralToString'
        inputfile: patient-example.json
        expression: true.toString()
        result:
          - 'true'
        model: r5
      - desc: '** testQuantityLiteralWkToString'
        inputfile: patient-example.json
        expression: 1 'wk'.toString()
        result:
          - 1 'wk'
        model: r5
      - desc: '** testQuantityLiteralWeekToString'
        inputfile: patient-example.json
        expression: 1 week.toString()
        result:
          - 1 week
        model: r5
  - 'group: testExists':
      - desc: '** testExists1'
        inputfile: patient-example.json
        expression: Patient.name.exists()
        result:
          - true
        model: r5
      - desc: '** testExists2'
        inputfile: patient-example.json
        expression: Patient.name.exists(use = 'nickname')
        result:
          - false
        model: r5
      - desc: '** testExists3'
        inputfile: patient-example.json
        expression: Patient.name.exists(use = 'official')
        result:
          - true
        model: r5
      - desc: '** testExists4'
        inputfile: patient-example.json
        expression: "Patient.maritalStatus.coding.exists(code = 'P' and system = 'http://terminology.hl7.org/CodeSystem/v3-MaritalStatus')\n\t\t\tor Patient.maritalStatus.coding.exists(code = 'A' and system = 'http://terminology.hl7.org/CodeSystem/v3-MaritalStatus')"
        result:
          - false
        model: r5
      - desc: '** testExists5'
        inputfile: patient-example.json
        expression: (1 | 2).exists()
        result:
          - true
        model: r5
  - 'group: testAll':
      - desc: '** testAllTrue1'
        inputfile: patient-example.json
        expression: Patient.name.select(given.exists()).allTrue()
        result:
          - true
        model: r5
      - desc: '** testAllTrue2'
        inputfile: patient-example.json
        expression: Patient.name.select(period.exists()).allTrue()
        result:
          - false
        model: r5
      - desc: '** testAllTrue3'
        inputfile: patient-example.json
        expression: Patient.name.all(given.exists())
        result:
          - true
        model: r5
      - desc: '** testAllTrue4'
        inputfile: patient-example.json
        expression: Patient.name.all(period.exists())
        result:
          - false
        model: r5
  - 'group: testSubSetOf':
      - desc: '** testSubSetOf1'
        inputfile: patient-example.json
        expression: Patient.name.first().subsetOf($this.name)
        result:
          - true
        model: r5
      - desc: '** testSubSetOf2'
        inputfile: patient-example.json
        expression: Patient.name.subsetOf($this.name.first()).not()
        result:
          - true
        model: r5
      - desc: '** testSubSetOf3'
        inputfile: explanationofbenefit-example.json
        expression: >-
          supportingInfo.where(category.coding.code =
          'additionalbodysite').sequence.subsetOf($this.item.informationSequence)
        result:
          - true
        model: r5
  - 'group: testSuperSetOf':
      - desc: '** testSuperSetOf1'
        inputfile: patient-example.json
        expression: Patient.name.first().supersetOf($this.name).not()
        result:
          - true
        model: r5
      - desc: '** testSuperSetOf2'
        inputfile: patient-example.json
        expression: Patient.name.supersetOf($this.name.first())
        result:
          - true
        model: r5
  - 'group: testQuantity':
      - desc: '** testQuantity1'
        inputfile: patient-example.json
        expression: 4.0000 'g' = 4000.0 'mg'
        result:
          - true
        model: r5
      - desc: '** testQuantity2'
        inputfile: patient-example.json
        expression: 4 'g' ~ 4000 'mg'
        result:
          - true
        model: r5
      - desc: '** testQuantity3'
        inputfile: patient-example.json
        expression: 4 'g' != 4040 'mg'
        result:
          - true
        model: r5
      - desc: '** testQuantity4'
        inputfile: patient-example.json
        expression: 4 'g' ~ 4040 'mg'
        result:
          - true
        model: r5
      - desc: '** testQuantity5'
        inputfile: patient-example.json
        expression: 7 days = 1 week
        result:
          - true
        model: r5
      - desc: '** testQuantity6'
        inputfile: patient-example.json
        expression: 7 days = 1 'wk'
        result:
          - true
        model: r5
        disable: true
      - desc: '** testQuantity7'
        inputfile: patient-example.json
        expression: 6 days < 1 week
        result:
          - true
        model: r5
      - desc: '** testQuantity8'
        inputfile: patient-example.json
        expression: 8 days > 1 week
        result:
          - true
        model: r5
      - desc: '** testQuantity9'
        inputfile: patient-example.json
        expression: 2.0 'cm' * 2.0 'm' = 0.040 'm2'
        result:
          - true
        model: r5
      - desc: '** testQuantity10'
        inputfile: patient-example.json
        expression: 4.0 'g' / 2.0 'm' = 2 'g/m'
        result:
          - true
        model: r5
      - desc: '** testQuantity11'
        inputfile: patient-example.json
        expression: 1.0 'm' / 1.0 'm' = 1 '1'
        result:
          - true
        model: r5
  - 'group: testCollectionBoolean':
      - desc: '** testCollectionBoolean1'
        inputfile: patient-example.json
        expression: 'iif(1 | 2 | 3, true, false)'
        error: true
        model: r5
        disable: true
      - desc: '** testCollectionBoolean2'
        inputfile: patient-example.json
        expression: 'iif({}, true, false)'
        result:
          - false
        model: r5
      - desc: '** testCollectionBoolean3'
        inputfile: patient-example.json
        expression: 'iif(true, true, false)'
        result:
          - true
        model: r5
      - desc: '** testCollectionBoolean4'
        inputfile: patient-example.json
        expression: 'iif({} | true, true, false)'
        result:
          - true
        model: r5
      - desc: '** testCollectionBoolean5'
        inputfile: patient-example.json
        expression: 'iif(true, true, 1/0)'
        result:
          - true
        model: r5
      - desc: '** testCollectionBoolean6'
        inputfile: patient-example.json
        expression: 'iif(false, 1/0, true)'
        result:
          - true
        model: r5
  - 'group: testDistinct':
      - desc: '** testDistinct1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).isDistinct()
        result:
          - true
        model: r5
      - desc: '** testDistinct2'
        inputfile: questionnaire-example.json
        expression: Questionnaire.descendants().linkId.isDistinct()
        result:
          - true
        model: r5
      - desc: '** testDistinct3'
        inputfile: questionnaire-example.json
        expression: >-
          Questionnaire.descendants().linkId.select(substring(0,1)).isDistinct().not()
        result:
          - true
        model: r5
      - desc: '** testDistinct4'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).distinct()
        result:
          - 1
          - 2
          - 3
        model: r5
      - desc: '** testDistinct5'
        inputfile: questionnaire-example.json
        expression: Questionnaire.descendants().linkId.distinct().count()
        result:
          - 10
        model: r5
      - desc: '** testDistinct6'
        inputfile: questionnaire-example.json
        expression: >-
          Questionnaire.descendants().linkId.select(substring(0,1)).distinct().count()
        result:
          - 2
        model: r5
  - 'group: testCount':
      - desc: '** testCount1'
        inputfile: patient-example.json
        expression: Patient.name.count()
        result:
          - 3
        model: r5
      - desc: '** testCount2'
        inputfile: patient-example.json
        expression: Patient.name.count() = 3
        result:
          - true
        model: r5
      - desc: '** testCount3'
        inputfile: patient-example.json
        expression: Patient.name.first().count()
        result:
          - 1
        model: r5
      - desc: '** testCount4'
        inputfile: patient-example.json
        expression: Patient.name.first().count() = 1
        result:
          - true
        model: r5
  - 'group: testWhere':
      - desc: '** testWhere1'
        inputfile: patient-example.json
        expression: Patient.name.count() = 3
        result:
          - true
        model: r5
      - desc: '** testWhere2'
        inputfile: patient-example.json
        expression: Patient.name.where(given = 'Jim').count() = 1
        result:
          - true
        model: r5
      - desc: '** testWhere3'
        inputfile: patient-example.json
        expression: Patient.name.where(given = 'X').count() = 0
        result:
          - true
        model: r5
      - desc: '** testWhere4'
        inputfile: patient-example.json
        expression: Patient.name.where($this.given = 'Jim').count() = 1
        result:
          - true
        model: r5
  - 'group: testSelect':
      - desc: '** testSelect1'
        inputfile: patient-example.json
        expression: Patient.name.select(given).count() = 5
        result:
          - true
        model: r5
      - desc: '** testSelect2'
        inputfile: patient-example.json
        expression: 'Patient.name.select(given | family).count() = 7 '
        result:
          - true
        model: r5
      - desc: '** testSelect3'
        inputfile: patient-example.json
        expression: name.select(use.contains('i')).count()
        result:
          - 3
        model: r5
  - 'group: testRepeat':
      - desc: '** testRepeat1'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.expansion.repeat(contains).count() = 10
        result:
          - true
        model: r5
      - desc: '** testRepeat2'
        inputfile: questionnaire-example.json
        expression: Questionnaire.repeat(item).code.count() = 11
        result:
          - true
        model: r5
      - desc: '** testRepeat3'
        inputfile: questionnaire-example.json
        expression: Questionnaire.descendants().code.count() = 23
        result:
          - true
        model: r5
      - desc: '** testRepeat4'
        inputfile: questionnaire-example.json
        expression: Questionnaire.children().code.count() = 2
        result:
          - true
        model: r5
      - desc: '** testRepeat5'
        inputfile: patient-example.json
        expression: Patient.name.repeat('test')
        result:
          - test
        model: r5
  - 'group: testAggregate':
      - desc: '** testAggregate1'
        inputfile: patient-example.json
        expression: '(1|2|3|4|5|6|7|8|9).aggregate($this+$total, 0) = 45'
        result:
          - true
        model: r5
      - desc: '** testAggregate2'
        inputfile: patient-example.json
        expression: '(1|2|3|4|5|6|7|8|9).aggregate($this+$total, 2) = 47'
        result:
          - true
        model: r5
      - desc: '** testAggregate3'
        inputfile: patient-example.json
        expression: >-
          (1|2|3|4|5|6|7|8|9).aggregate(iif($total.empty(), $this, iif($this <
          $total, $this, $total))) = 1
        result:
          - true
        model: r5
      - desc: '** testAggregate4'
        inputfile: patient-example.json
        expression: >-
          (1|2|3|4|5|6|7|8|9).aggregate(iif($total.empty(), $this, iif($this >
          $total, $this, $total))) = 9
        result:
          - true
        model: r5
  - 'group: testIndexer':
      - desc: '** testIndexer1'
        inputfile: patient-example.json
        expression: 'Patient.name[0].given = ''Peter'' | ''James'''
        result:
          - true
        model: r5
      - desc: '** testIndexer2'
        inputfile: patient-example.json
        expression: 'Patient.name[1].given = ''Jim'''
        result:
          - true
        model: r5
  - 'group: testSingle':
      - desc: '** testSingle1'
        inputfile: patient-example.json
        expression: Patient.name.first().single().exists()
        result:
          - true
        model: r5
      - desc: '** testSingle2'
        inputfile: patient-example.json
        expression: Patient.name.single().exists()
        error: true
        model: r5
  - 'group: testFirstLast':
      - desc: '** testFirstLast1'
        inputfile: patient-example.json
        expression: Patient.name.first().given = 'Peter' | 'James'
        result:
          - true
        model: r5
      - desc: '** testFirstLast2'
        inputfile: patient-example.json
        expression: Patient.name.last().given = 'Peter' | 'James'
        result:
          - true
        model: r5
  - 'group: testTail':
      - desc: '** testTail1'
        inputfile: patient-example.json
        expression: (0 | 1 | 2).tail() = 1 | 2
        result:
          - true
        model: r5
      - desc: '** testTail2'
        inputfile: patient-example.json
        expression: Patient.name.tail().given = 'Jim' | 'Peter' | 'James'
        result:
          - true
        model: r5
  - 'group: testSkip':
      - desc: '** testSkip1'
        inputfile: patient-example.json
        expression: (0 | 1 | 2).skip(1) = 1 | 2
        result:
          - true
        model: r5
      - desc: '** testSkip2'
        inputfile: patient-example.json
        expression: (0 | 1 | 2).skip(2) = 2
        result:
          - true
        model: r5
      - desc: '** testSkip3'
        inputfile: patient-example.json
        expression: Patient.name.skip(1).given.trace('test') = 'Jim' | 'Peter' | 'James'
        result:
          - true
        model: r5
      - desc: '** testSkip4'
        inputfile: patient-example.json
        expression: Patient.name.skip(3).given.exists() = false
        result:
          - true
        model: r5
  - 'group: testTake':
      - desc: '** testTake1'
        inputfile: patient-example.json
        expression: (0 | 1 | 2).take(1) = 0
        result:
          - true
        model: r5
      - desc: '** testTake2'
        inputfile: patient-example.json
        expression: (0 | 1 | 2).take(2) = 0 | 1
        result:
          - true
        model: r5
      - desc: '** testTake3'
        inputfile: patient-example.json
        expression: Patient.name.take(1).given = 'Peter' | 'James'
        result:
          - true
        model: r5
      - desc: '** testTake4'
        inputfile: patient-example.json
        expression: Patient.name.take(2).given = 'Peter' | 'James' | 'Jim'
        result:
          - true
        model: r5
      - desc: '** testTake5'
        inputfile: patient-example.json
        expression: Patient.name.take(3).given.count() = 5
        result:
          - true
        model: r5
      - desc: '** testTake6'
        inputfile: patient-example.json
        expression: Patient.name.take(4).given.count() = 5
        result:
          - true
        model: r5
      - desc: '** testTake7'
        inputfile: patient-example.json
        expression: Patient.name.take(0).given.exists() = false
        result:
          - true
        model: r5
  - 'group: testIif':
      - desc: '** testIif1'
        inputfile: patient-example.json
        expression: 'iif(Patient.name.exists(), ''named'', ''unnamed'') = ''named'''
        result:
          - true
        model: r5
      - desc: '** testIif2'
        inputfile: patient-example.json
        expression: 'iif(Patient.name.empty(), ''unnamed'', ''named'') = ''named'''
        result:
          - true
        model: r5
      - desc: '** testIif3'
        inputfile: patient-example.json
        expression: 'iif(true, true, (1 | 2).toString())'
        result:
          - true
        model: r5
      - desc: '** testIif4'
        inputfile: patient-example.json
        expression: 'iif(false, (1 | 2).toString(), true)'
        result:
          - true
        model: r5
      - desc: '** testIif5'
        inputfile: patient-example.json
        expression: 'iif(false, ''true-result'').empty()'
        result:
          - true
        model: r5
      - desc: '** testIif6'
        inputfile: patient-example.json
        expression: 'iif(''non boolean criteria'', ''true-result'', ''true-result'')'
        error: true
        model: r5
        disable: true
      - desc: '** testIif7'
        inputfile: patient-example.json
        expression: '{}.iif(true, ''true-result'', ''false-result'')'
        result:
          - true-result
        model: r5
      - desc: '** testIif8'
        inputfile: patient-example.json
        expression: '(''item'').iif(true, ''true-result'', ''false-result'')'
        result:
          - true-result
        model: r5
      - desc: '** testIif9'
        inputfile: patient-example.json
        expression: '(''context'').iif(true, select($this), ''false-result'')'
        result:
          - context
        model: r5
      - desc: '** testIif10'
        inputfile: patient-example.json
        expression: '(''item1'' | ''item2'').iif(true, ''true-result'', ''false-result'')'
        error: true
        model: r5
        disable: true
      - desc: '** testIif11'
        inputfile: patient-example.json
        expression: '(''context'').iif($this = ''context'',''true-result'', ''false-result'')'
        result:
          - true-result
        model: r5
  - 'group: testToInteger':
      - desc: '** testToInteger1'
        inputfile: patient-example.json
        expression: '''1''.toInteger() = 1'
        result:
          - true
        model: r5
      - desc: '** testToInteger2'
        inputfile: patient-example.json
        expression: '''-1''.toInteger() = -1'
        result:
          - true
        model: r5
      - desc: '** testToInteger3'
        inputfile: patient-example.json
        expression: '''0''.toInteger() = 0'
        result:
          - true
        model: r5
      - desc: '** testToInteger4'
        inputfile: patient-example.json
        expression: '''0.0''.toInteger().empty()'
        result:
          - true
        model: r5
      - desc: '** testToInteger5'
        inputfile: patient-example.json
        expression: '''st''.toInteger().empty()'
        result:
          - true
        model: r5
  - 'group: testToDecimal':
      - desc: '** testToDecimal1'
        inputfile: patient-example.json
        expression: '''1''.toDecimal() = 1'
        result:
          - true
        model: r5
      - desc: '** testToDecimal2'
        inputfile: patient-example.json
        expression: '''-1''.toInteger() = -1'
        result:
          - true
        model: r5
      - desc: '** testToDecimal3'
        inputfile: patient-example.json
        expression: '''0''.toDecimal() = 0'
        result:
          - true
        model: r5
      - desc: '** testToDecimal4'
        inputfile: patient-example.json
        expression: '''0.0''.toDecimal() = 0.0'
        result:
          - true
        model: r5
      - desc: '** testToDecimal5'
        inputfile: patient-example.json
        expression: '''st''.toDecimal().empty()'
        result:
          - true
        model: r5
  - 'group: testToString':
      - desc: '** testToString1'
        inputfile: patient-example.json
        expression: 1.toString() = '1'
        result:
          - true
        model: r5
      - desc: '** testToString2'
        inputfile: patient-example.json
        expression: '''-1''.toInteger() = -1'
        result:
          - true
        model: r5
      - desc: '** testToString3'
        inputfile: patient-example.json
        expression: 0.toString() = '0'
        result:
          - true
        model: r5
      - desc: '** testToString4'
        inputfile: patient-example.json
        expression: 0.0.toString() = '0.0'
        result:
          - true
        model: r5
        disable: true
      - desc: '** testToString5'
        inputfile: patient-example.json
        expression: '@2014-12-14.toString() = ''2014-12-14'''
        result:
          - true
        model: r5
  - 'group: testCase':
      - desc: '** testCase1'
        inputfile: patient-example.json
        expression: '''t''.upper() = ''T'''
        result:
          - true
        model: r5
      - desc: '** testCase2'
        inputfile: patient-example.json
        expression: '''t''.lower() = ''t'''
        result:
          - true
        model: r5
      - desc: '** testCase3'
        inputfile: patient-example.json
        expression: '''T''.upper() = ''T'''
        result:
          - true
        model: r5
      - desc: '** testCase4'
        inputfile: patient-example.json
        expression: '''T''.lower() = ''t'''
        result:
          - true
        model: r5
  - 'group: testToChars':
      - desc: '** testToChars1'
        inputfile: patient-example.json
        expression: '''t2''.toChars() = ''t'' | ''2'''
        result:
          - true
        model: r5
  - 'group: testIndexOf':
      - desc: '** testIndexOf1'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.indexOf(''-'')'
        result:
          - 12
        model: r5
      - desc: '** testIndexOf2'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.indexOf(''z'')'
        result:
          - -1
        model: r5
      - desc: '** testIndexOf3'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.indexOf('''')'
        result:
          - 0
        model: r5
      - desc: '** testIndexOf5'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.indexOf({}).empty() = true'
        result:
          - true
        model: r5
      - desc: '** testIndexOf4'
        inputfile: patient-example.json
        expression: '{}.indexOf(''-'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testIndexOf6'
        inputfile: patient-example.json
        expression: '{}.indexOf({}).empty() = true'
        result:
          - true
        model: r5
  - 'group: testSubstring':
      - desc: '** testSubstring1'
        inputfile: patient-example.json
        expression: '''12345''.substring(2) = ''345'''
        result:
          - true
        model: r5
      - desc: '** testSubstring2'
        inputfile: patient-example.json
        expression: '''12345''.substring(2,1) = ''3'''
        result:
          - true
        model: r5
      - desc: '** testSubstring3'
        inputfile: patient-example.json
        expression: '''12345''.substring(2,5) = ''345'''
        result:
          - true
        model: r5
      - desc: '** testSubstring4'
        inputfile: patient-example.json
        expression: '''12345''.substring(25).empty()'
        result:
          - true
        model: r5
      - desc: '** testSubstring5'
        inputfile: patient-example.json
        expression: '''12345''.substring(-1).empty()'
        result:
          - true
        model: r5
      - desc: '** testSubstring7'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.substring(0, 12)'
        result:
          - LogicalModel
        model: r5
      - desc: '** testSubstring8'
        inputfile: patient-example.json
        expression: '''LogicalModel-Person''.substring(0, ''LogicalModel-Person''.indexOf(''-''))'
        result:
          - LogicalModel
        model: r5
      - desc: '** testSubstring9'
        inputfile: patient-example.json
        expression: '{}.substring(25).empty() = true'
        result:
          - true
        model: r5
  - 'group: testStartsWith':
      - desc: '** testStartsWith1'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''2'') = false'
        result:
          - true
        model: r5
      - desc: '** testStartsWith2'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''1'') = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith3'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''12'') = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith4'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''13'') = false'
        result:
          - true
        model: r5
      - desc: '** testStartsWith5'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''12345'') = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith6'
        inputfile: patient-example.json
        expression: '''12345''.startsWith(''123456'') = false'
        result:
          - true
        model: r5
      - desc: '** testStartsWith7'
        inputfile: patient-example.json
        expression: '''12345''.startsWith('''') = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith8'
        inputfile: patient-example.json
        expression: '{}.startsWith(''1'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith9'
        inputfile: patient-example.json
        expression: '{}.startsWith('''').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith10'
        inputfile: patient-example.json
        expression: '''''.startsWith('''') = true'
        result:
          - true
        model: r5
      - desc: '** testStartsWith11'
        inputfile: patient-example.json
        expression: '{}.startsWith('''').exists() = false'
        result:
          - true
        model: r5
      - desc: '** testStartsWithNonString1'
        inputfile: appointment-examplereq.json
        expression: Appointment.identifier.startsWith('rand')
        error: true
        model: r5
  - 'group: testEndsWith':
      - desc: '** testEndsWith1'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''2'') = false'
        result:
          - true
        model: r5
      - desc: '** testEndsWith2'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''5'') = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWith3'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''45'') = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWith4'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''35'') = false'
        result:
          - true
        model: r5
      - desc: '** testEndsWith5'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''12345'') = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWith6'
        inputfile: patient-example.json
        expression: '''12345''.endsWith(''012345'') = false'
        result:
          - true
        model: r5
      - desc: '** testEndsWith7'
        inputfile: patient-example.json
        expression: '''12345''.endsWith('''') = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWith8'
        inputfile: patient-example.json
        expression: '{}.endsWith(''1'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWith9'
        inputfile: patient-example.json
        expression: '{}.endsWith('''').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testEndsWithNonString1'
        inputfile: appointment-examplereq.json
        expression: Appointment.identifier.endsWith('rand')
        error: true
        model: r5
  - 'group: testContainsString':
      - desc: '** testContainsString1'
        inputfile: patient-example.json
        expression: '''12345''.contains(''6'') = false'
        result:
          - true
        model: r5
      - desc: '** testContainsString2'
        inputfile: patient-example.json
        expression: '''12345''.contains(''5'') = true'
        result:
          - true
        model: r5
      - desc: '** testContainsString3'
        inputfile: patient-example.json
        expression: '''12345''.contains(''45'') = true'
        result:
          - true
        model: r5
      - desc: '** testContainsString4'
        inputfile: patient-example.json
        expression: '''12345''.contains(''35'') = false'
        result:
          - true
        model: r5
      - desc: '** testContainsString5'
        inputfile: patient-example.json
        expression: '''12345''.contains(''12345'') = true'
        result:
          - true
        model: r5
      - desc: '** testContainsString6'
        inputfile: patient-example.json
        expression: '''12345''.contains(''012345'') = false'
        result:
          - true
        model: r5
      - desc: '** testContainsString7'
        inputfile: patient-example.json
        expression: '''12345''.contains('''') = true'
        result:
          - true
        model: r5
      - desc: '** testContainsString8'
        inputfile: patient-example.json
        expression: '{}.contains(''a'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testContainsString9'
        inputfile: patient-example.json
        expression: '{}.contains('''').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testContainsNonString1'
        inputfile: appointment-examplereq.json
        expression: Appointment.identifier.contains('rand')
        error: true
        model: r5
  - 'group: testMatches':
      - desc: '** testMatchesCaseSensitive1'
        expression: '''FHIR''.matches(''FHIR'')'
        result:
          - true
        model: r5
      - desc: '** testMatchesCaseSensitive2'
        expression: '''FHIR''.matches(''fhir'')'
        result:
          - false
        model: r5
      - desc: '** testMatchesEmpty'
        expression: '''FHIR''.matches({}).empty() = true'
        result:
          - true
        model: r5
      - desc: '** testMatchesEmpty2'
        expression: '{}.matches(''FHIR'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testMatchesEmpty3'
        expression: '{}.matches({}).empty() = true'
        result:
          - true
        model: r5
      - desc: '** testMatchesSingleLineMode1'
        expression: "'A\n\t\t\tB'.matches('A.*B')"
        result:
          - true
        model: r5
      - desc: '** testMatchesWithinUrl1'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matches('library')
        result:
          - false
        model: r5
      - desc: '** testMatchesWithinUrl2'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matches('Library')
        result:
          - true
        model: r5
      - desc: '** testMatchesWithinUrl3'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matches('^Library$')
        result:
          - false
        model: r5
      - desc: '** testMatchesWithinUrl1a'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matches('.*Library.*')
        result:
          - true
        model: r5
      - desc: '** testMatchesWithinUrl4'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matches('Measure')
        result:
          - false
        model: r5
      - desc: '** testMatchesFullWithinUrl1'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matchesFull('library')
        result:
          - false
        model: r5
        disable: true
      - desc: '** testMatchesFullWithinUrl3'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matchesFull('Library')
        result:
          - false
        model: r5
        disable: true
      - desc: '** testMatchesFullWithinUrl4'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matchesFull('^Library$')
        result:
          - false
        model: r5
        disable: true
      - desc: '** testMatchesFullWithinUrl1a'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matchesFull('.*Library.*')
        result:
          - true
        model: r5
        disable: true
      - desc: '** testMatchesFullWithinUrl2'
        expression: >-
          'http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1'.matchesFull('Measure')
        result:
          - false
        model: r5
        disable: true
  - 'group: testReplaceMatches':
      - desc: '** testReplaceMatches1'
        inputfile: patient-example.json
        expression: '''123456''.replaceMatches(''234'', ''X'')'
        result:
          - 1X56
        model: r5
      - desc: '** testReplaceMatches2'
        inputfile: patient-example.json
        expression: '''abc''.replaceMatches('''', ''x'')'
        result:
          - abc
        model: r5
        disable: true
      - desc: '** testReplaceMatches3'
        inputfile: patient-example.json
        expression: '''123456''.replaceMatches(''234'', '''')'
        result:
          - '156'
        model: r5
      - desc: '** testReplaceMatches4'
        inputfile: patient-example.json
        expression: '{}.replaceMatches(''234'', ''X'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testReplaceMatches5'
        inputfile: patient-example.json
        expression: '''123''.replaceMatches({}, ''X'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testReplaceMatches6'
        inputfile: patient-example.json
        expression: '''123''.replaceMatches(''2'', {}).empty() = true'
        result:
          - true
        model: r5
      - desc: '** testReplaceMatches7'
        inputfile: patient-example.json
        expression: '''abc123''.replaceMatches(''[0-9]'', ''-'')'
        result:
          - abc---
        model: r5
  - 'group: testReplace':
      - desc: '** testReplace1'
        inputfile: patient-example.json
        expression: '''123456''.replace(''234'', ''X'')'
        result:
          - 1X56
        model: r5
      - desc: '** testReplace2'
        inputfile: patient-example.json
        expression: '''abc''.replace('''', ''x'')'
        result:
          - xaxbxcx
        model: r5
      - desc: '** testReplace3'
        inputfile: patient-example.json
        expression: '''123456''.replace(''234'', '''')'
        result:
          - '156'
        model: r5
      - desc: '** testReplace4'
        inputfile: patient-example.json
        expression: '{}.replace(''234'', ''X'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testReplace5'
        inputfile: patient-example.json
        expression: '''123''.replace({}, ''X'').empty() = true'
        result:
          - true
        model: r5
      - desc: '** testReplace6'
        inputfile: patient-example.json
        expression: '''123''.replace(''2'', {}).empty() = true'
        result:
          - true
        model: r5
  - 'group: testLength':
      - desc: '** testLength1'
        inputfile: patient-example.json
        expression: '''123456''.length() = 6'
        result:
          - true
        model: r5
      - desc: '** testLength2'
        inputfile: patient-example.json
        expression: '''12345''.length() = 5'
        result:
          - true
        model: r5
      - desc: '** testLength3'
        inputfile: patient-example.json
        expression: '''123''.length() = 3'
        result:
          - true
        model: r5
      - desc: '** testLength4'
        inputfile: patient-example.json
        expression: '''1''.length() = 1'
        result:
          - true
        model: r5
      - desc: '** testLength5'
        inputfile: patient-example.json
        expression: '''''.length() = 0'
        result:
          - true
        model: r5
      - desc: '** testLength6'
        inputfile: patient-example.json
        expression: '{}.length().empty() = true'
        result:
          - true
        model: r5
  - 'group: testEncodeDecode':
      - desc: '** testEncodeBase64A'
        inputfile: patient-example.json
        expression: '''test''.encode(''base64'')'
        result:
          - dGVzdA==
        model: r5
      - desc: '** testEncodeHex'
        inputfile: patient-example.json
        expression: '''test''.encode(''hex'')'
        result:
          - '74657374'
        model: r5
      - desc: '** testEncodeBase64B'
        inputfile: patient-example.json
        expression: '''subjects?_d''.encode(''base64'')'
        result:
          - c3ViamVjdHM/X2Q=
        model: r5
      - desc: '** testEncodeUrlBase64'
        inputfile: patient-example.json
        expression: '''subjects?_d''.encode(''urlbase64'')'
        result:
          - c3ViamVjdHM_X2Q=
        model: r5
      - desc: '** testDecodeBase64A'
        inputfile: patient-example.json
        expression: '''dGVzdA==''.decode(''base64'')'
        result:
          - test
        model: r5
      - desc: '** testDecodeHex'
        inputfile: patient-example.json
        expression: '''74657374''.decode(''hex'')'
        result:
          - test
        model: r5
      - desc: '** testDecodeBase64B'
        inputfile: patient-example.json
        expression: '''c3ViamVjdHM/X2Q=''.decode(''base64'')'
        result:
          - subjects?_d
        model: r5
      - desc: '** testDecodeUrlBase64'
        inputfile: patient-example.json
        expression: '''c3ViamVjdHM_X2Q=''.decode(''urlbase64'')'
        result:
          - subjects?_d
        model: r5
  - 'group: testEscapeUnescape':
      - desc: '** testEscapeHtml'
        inputfile: patient-example.json
        expression: '''"1<2"''.escape(''html'')'
        result:
          - '&quot;1&lt;2&quot;'
        model: r5
      - desc: '** testEscapeJson'
        inputfile: patient-example.json
        expression: '''"1<2"''.escape(''json'')'
        result:
          - \"1<2\"
        model: r5
      - desc: '** testUnescapeHtml'
        inputfile: patient-example.json
        expression: '''&quot;1&lt;2&quot;''.unescape(''html'')'
        result:
          - '"1<2"'
        model: r5
      - desc: '** testUnescapeJson'
        inputfile: patient-example.json
        expression: '''\"1<2\"''.unescape(''json'')'
        result:
          - '"1<2"'
        model: r5
    disable: true
  - 'group: testTrim':
      - desc: '** testTrim1'
        inputfile: patient-example.json
        expression: '''123456''.trim().length() = 6'
        result:
          - true
        model: r5
      - desc: '** testTrim2'
        inputfile: patient-example.json
        expression: '''123 456''.trim().length() = 7'
        result:
          - true
        model: r5
      - desc: '** testTrim3'
        inputfile: patient-example.json
        expression: ''' 123456 ''.trim().length() = 6'
        result:
          - true
        model: r5
      - desc: '** testTrim4'
        inputfile: patient-example.json
        expression: '''  ''.trim().length() = 0'
        result:
          - true
        model: r5
      - desc: '** testTrim5'
        inputfile: patient-example.json
        expression: '{}.trim().empty() = true'
        result:
          - true
        model: r5
      - desc: '** testTrim6'
        inputfile: patient-example.json
        expression: '''      ''.trim() = '''''
        result:
          - true
        model: r5
  - 'group: testSplit':
      - desc: '** testSplit1'
        inputfile: patient-example.json
        expression: '''Peter,James,Jim,Peter,James''.split('','').count() = 5'
        result:
          - true
        model: r5
      - desc: '** testSplit2'
        inputfile: patient-example.json
        expression: '''A,,C''.split('','').join('','') = ''A,,C'''
        result:
          - true
        model: r5
      - desc: '** testSplit3'
        inputfile: patient-example.json
        expression: >-
          '[stop]ONE[stop][stop]TWO[stop][stop][stop]THREE[stop][stop]'.split('[stop]').trace('n').count()
          = 9
        result:
          - true
        model: r5
      - desc: '** testSplit4'
        inputfile: patient-example.json
        expression: >-
          '[stop]ONE[stop][stop]TWO[stop][stop][stop]THREE[stop][stop]'.split('[stop]').join('[stop]')
        result:
          - '[stop]ONE[stop][stop]TWO[stop][stop][stop]THREE[stop][stop]'
        model: r5
  - 'group: testJoin':
      - desc: '** testJoin'
        inputfile: patient-example.json
        expression: 'name.given.join('','')'
        result:
          - 'Peter,James,Jim,Peter,James'
        model: r5
  - 'group: testTrace':
      - desc: '** testTrace1'
        inputfile: patient-example.json
        expression: name.given.trace('test').count() = 5
        result:
          - true
        model: r5
      - desc: '** testTrace2'
        inputfile: patient-example.json
        expression: 'name.trace(''test'', given).count() = 3'
        result:
          - true
        model: r5
  - 'group: testToday':
      - desc: '** testToday1'
        inputfile: patient-example.json
        expression: Patient.birthDate < today()
        result:
          - true
        model: r5
      - desc: '** testToday2'
        inputfile: patient-example.json
        expression: today().toString().length() = 10
        result:
          - true
        model: r5
  - 'group: testNow':
      - desc: '** testNow1'
        inputfile: patient-example.json
        expression: Patient.birthDate < now()
        result:
          - true
        model: r5
      - desc: '** testNow2'
        inputfile: patient-example.json
        expression: now().toString().length() > 10
        result:
          - true
        model: r5
  - 'group: testSort':
      - desc: '** testSort1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).sort() = (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testSort2'
        inputfile: patient-example.json
        expression: (3 | 2 | 1).sort() = (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testSort3'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).sort($this) = (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testSort4'
        inputfile: patient-example.json
        expression: (3 | 2 | 1).sort($this) = (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testSort5'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).sort(-$this) = (3 | 2 | 1)
        result:
          - true
        model: r5
      - desc: '** testSort6'
        inputfile: patient-example.json
        expression: ('a' | 'b' | 'c').sort($this) = ('a' | 'b' | 'c')
        result:
          - true
        model: r5
      - desc: '** testSort7'
        inputfile: patient-example.json
        expression: ('c' | 'b' | 'a').sort($this) = ('a' | 'b' | 'c')
        result:
          - true
        model: r5
      - desc: '** testSort8'
        inputfile: patient-example.json
        expression: ('a' | 'b' | 'c').sort(-$this) = ('c' | 'b' | 'a')
        result:
          - true
        model: r5
      - desc: '** testSort9'
        inputfile: patient-example.json
        expression: 'Patient.name[0].given.sort() = (''James'' | ''Peter'')'
        result:
          - true
        model: r5
      - desc: '** testSort10'
        inputfile: patient-example.json
        expression: 'Patient.name.sort(-family, -given.first()).first().use = ''usual'''
        result:
          - true
        model: r5
    disable: true
  - 'group: testEquality':
      - desc: '** testEquality1'
        inputfile: patient-example.json
        expression: 1 = 1
        result:
          - true
        model: r5
      - desc: '** testEquality2'
        inputfile: patient-example.json
        expression: '{} = {}'
        model: r5
        result: []
      - desc: '** testEquality3'
        inputfile: patient-example.json
        expression: 'true = {}'
        model: r5
        result: []
      - desc: '** testEquality4'
        inputfile: patient-example.json
        expression: (1) = (1)
        result:
          - true
        model: r5
      - desc: '** testEquality5'
        inputfile: patient-example.json
        expression: (1 | 2) = (1 | 2)
        result:
          - true
        model: r5
      - desc: '** testEquality6'
        inputfile: patient-example.json
        expression: (1 | 2 | 3) = (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testEquality7'
        inputfile: patient-example.json
        expression: '(1 | 1) = (1 | 2 | {})'
        result:
          - false
        model: r5
      - desc: '** testEquality8'
        inputfile: patient-example.json
        expression: 1 = 2
        result:
          - false
        model: r5
      - desc: '** testEquality9'
        inputfile: patient-example.json
        expression: '''a'' = ''a'''
        result:
          - true
        model: r5
      - desc: '** testEquality10'
        inputfile: patient-example.json
        expression: '''a'' = ''A'''
        result:
          - false
        model: r5
      - desc: '** testEquality11'
        inputfile: patient-example.json
        expression: '''a'' = ''b'''
        result:
          - false
        model: r5
      - desc: '** testEquality12'
        inputfile: patient-example.json
        expression: 1.1 = 1.1
        result:
          - true
        model: r5
      - desc: '** testEquality13'
        inputfile: patient-example.json
        expression: 1.1 = 1.2
        result:
          - false
        model: r5
      - desc: '** testEquality14'
        inputfile: patient-example.json
        expression: 1.10 = 1.1
        result:
          - true
        model: r5
      - desc: '** testEquality15'
        inputfile: patient-example.json
        expression: 0 = 0
        result:
          - true
        model: r5
      - desc: '** testEquality16'
        inputfile: patient-example.json
        expression: 0.0 = 0
        result:
          - true
        model: r5
      - desc: '** testEquality17'
        inputfile: patient-example.json
        expression: '@2012-04-15 = @2012-04-15'
        result:
          - true
        model: r5
      - desc: '** testEquality18'
        inputfile: patient-example.json
        expression: '@2012-04-15 = @2012-04-16'
        result:
          - false
        model: r5
      - desc: '** testEquality19'
        inputfile: patient-example.json
        expression: '@2012-04-15 = @2012-04-15T10:00:00'
        model: r5
        result: []
      - desc: '** testEquality20'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00 = @2012-04-15T10:00:00'
        result:
          - false
        model: r5
      - desc: '** testEquality21'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 = @2012-04-15T15:30:31.0'
        result:
          - true
        model: r5
      - desc: '** testEquality22'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 = @2012-04-15T15:30:31.1'
        result:
          - false
        model: r5
      - desc: '** testEquality23'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00Z = @2012-04-15T10:00:00'
        model: r5
        result: []
        disable: true
      - desc: '** testEquality24'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00+02:00 = @2012-04-15T16:00:00+03:00'
        result:
          - true
        model: r5
      - desc: '** testEquality25'
        inputfile: patient-example.json
        expression: name = name
        result:
          - true
        model: r5
      - desc: '** testEquality26'
        inputfile: patient-example.json
        expression: name.take(2) = name.take(2).first() | name.take(2).last()
        result:
          - true
        model: r5
      - desc: '** testEquality27'
        inputfile: patient-example.json
        expression: name.take(2) = name.take(2).last() | name.take(2).first()
        result:
          - false
        model: r5
      - desc: '** testEquality28'
        inputfile: observation-example.json
        expression: 'Observation.value = 185 ''[lb_av]'''
        result:
          - true
        model: r5
  - 'group: testNEquality':
      - desc: '** testNEquality1'
        inputfile: patient-example.json
        expression: 1 != 1
        result:
          - false
        model: r5
      - desc: '** testNEquality2'
        inputfile: patient-example.json
        expression: '{} != {}'
        model: r5
        result: []
      - desc: '** testNEquality3'
        inputfile: patient-example.json
        expression: 1 != 2
        result:
          - true
        model: r5
      - desc: '** testNEquality4'
        inputfile: patient-example.json
        expression: '''a'' != ''a'''
        result:
          - false
        model: r5
      - desc: '** testNEquality5'
        inputfile: patient-example.json
        expression: '''a'' != ''b'''
        result:
          - true
        model: r5
      - desc: '** testNEquality6'
        inputfile: patient-example.json
        expression: 1.1 != 1.1
        result:
          - false
        model: r5
      - desc: '** testNEquality7'
        inputfile: patient-example.json
        expression: 1.1 != 1.2
        result:
          - true
        model: r5
      - desc: '** testNEquality8'
        inputfile: patient-example.json
        expression: 1.10 != 1.1
        result:
          - false
        model: r5
      - desc: '** testNEquality9'
        inputfile: patient-example.json
        expression: 0 != 0
        result:
          - false
        model: r5
      - desc: '** testNEquality10'
        inputfile: patient-example.json
        expression: 0.0 != 0
        result:
          - false
        model: r5
      - desc: '** testNEquality11'
        inputfile: patient-example.json
        expression: '@2012-04-15 != @2012-04-15'
        result:
          - false
        model: r5
      - desc: '** testNEquality12'
        inputfile: patient-example.json
        expression: '@2012-04-15 != @2012-04-16'
        result:
          - true
        model: r5
      - desc: '** testNEquality13'
        inputfile: patient-example.json
        expression: '@2012-04-15 != @2012-04-15T10:00:00'
        model: r5
        result: []
      - desc: '** testNEquality14'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00 != @2012-04-15T10:00:00'
        result:
          - true
        model: r5
      - desc: '** testNEquality15'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 != @2012-04-15T15:30:31.0'
        result:
          - false
        model: r5
      - desc: '** testNEquality16'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 != @2012-04-15T15:30:31.1'
        result:
          - true
        model: r5
      - desc: '** testNEquality17'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00Z != @2012-04-15T10:00:00'
        model: r5
        result: []
        disable: true
      - desc: '** testNEquality18'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:00:00+02:00 != @2012-04-15T16:00:00+03:00'
        result:
          - false
        model: r5
      - desc: '** testNEquality19'
        inputfile: patient-example.json
        expression: name != name
        result:
          - false
        model: r5
      - desc: '** testNEquality20'
        inputfile: patient-example.json
        expression: name.take(2) != name.take(2).first() | name.take(2).last()
        result:
          - false
        model: r5
      - desc: '** testNEquality21'
        inputfile: patient-example.json
        expression: name.take(2) != name.take(2).last() | name.take(2).first()
        result:
          - true
        model: r5
      - desc: '** testNEquality22'
        inputfile: patient-example.json
        expression: (1.2 / 1.8).round(2) != 0.6666667
        result:
          - true
        model: r5
      - desc: '** testNEquality23'
        inputfile: patient-example.json
        expression: (1.2 / 1.8).round(2) != 0.67
        result:
          - false
        model: r5
      - desc: '** testNEquality24'
        inputfile: observation-example.json
        expression: Observation.value != 185 'kg'
        result:
          - true
        model: r5
  - 'group: testEquivalent':
      - desc: '** testEquivalent1'
        inputfile: patient-example.json
        expression: 1 ~ 1
        result:
          - true
        model: r5
      - desc: '** testEquivalent2'
        inputfile: patient-example.json
        expression: '{} ~ {}'
        result:
          - true
        model: r5
      - desc: '** testEquivalent3'
        inputfile: patient-example.json
        expression: '1 ~ {}'
        result:
          - false
        model: r5
        disable: true
      - desc: '** testEquivalent4'
        inputfile: patient-example.json
        expression: 1 ~ 2
        result:
          - false
        model: r5
      - desc: '** testEquivalent5'
        inputfile: patient-example.json
        expression: '''a'' ~ ''a'''
        result:
          - true
        model: r5
      - desc: '** testEquivalent6'
        inputfile: patient-example.json
        expression: '''a'' ~ ''A'''
        result:
          - true
        model: r5
      - desc: '** testEquivalent7'
        inputfile: patient-example.json
        expression: '''a'' ~ ''b'''
        result:
          - false
        model: r5
      - desc: '** testEquivalent8'
        inputfile: patient-example.json
        expression: 1.1 ~ 1.1
        result:
          - true
        model: r5
      - desc: '** testEquivalent9'
        inputfile: patient-example.json
        expression: 1.1 ~ 1.2
        result:
          - false
        model: r5
      - desc: '** testEquivalent10'
        inputfile: patient-example.json
        expression: 1.10 ~ 1.1
        result:
          - true
        model: r5
      - desc: '** testEquivalent11'
        inputfile: patient-example.json
        expression: 1.2 / 1.8 ~ 0.67
        result:
          - true
        model: r5
      - desc: '** testEquivalent12'
        inputfile: patient-example.json
        expression: 0 ~ 0
        result:
          - true
        model: r5
      - desc: '** testEquivalent13'
        inputfile: patient-example.json
        expression: 0.0 ~ 0
        result:
          - true
        model: r5
      - desc: '** testEquivalent14'
        inputfile: patient-example.json
        expression: '@2012-04-15 ~ @2012-04-15'
        result:
          - true
        model: r5
      - desc: '** testEquivalent15'
        inputfile: patient-example.json
        expression: '@2012-04-15 ~ @2012-04-16'
        result:
          - false
        model: r5
      - desc: '** testEquivalent16'
        inputfile: patient-example.json
        expression: '@2012-04-15 ~ @2012-04-15T10:00:00'
        result:
          - false
        model: r5
      - desc: '** testEquivalent17'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 ~ @2012-04-15T15:30:31.0'
        result:
          - true
        model: r5
      - desc: '** testEquivalent18'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 ~ @2012-04-15T15:30:31.1'
        result:
          - false
        model: r5
      - desc: '** testEquivalent19'
        inputfile: patient-example.json
        expression: name ~ name
        result:
          - true
        model: r5
      - desc: '** testEquivalent20'
        inputfile: patient-example.json
        expression: >-
          name.take(2).given ~ name.take(2).first().given |
          name.take(2).last().given
        result:
          - true
        model: r5
      - desc: '** testEquivalent21'
        inputfile: patient-example.json
        expression: >-
          name.take(2).given ~ name.take(2).last().given |
          name.take(2).first().given
        result:
          - true
        model: r5
        disable: true
      - desc: '** testEquivalent22'
        inputfile: observation-example.json
        expression: 'Observation.value ~ 185 ''[lb_av]'''
        result:
          - true
        model: r5
      - desc: '** testEquivalent23'
        inputfile: observation-example.json
        expression: (1 | 2 | 3) ~ (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testEquivalent23'
        inputfile: observation-example.json
        expression: (1 | 2 | 3) ~ (3 | 2 | 1)
        result:
          - true
        model: r5
        disable: true
  - 'group: testNotEquivalent':
      - desc: '** testNotEquivalent1'
        inputfile: patient-example.json
        expression: 1 !~ 1
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent2'
        inputfile: patient-example.json
        expression: '{} !~ {}'
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent3'
        inputfile: patient-example.json
        expression: '{} !~ 1'
        result:
          - true
        model: r5
        disable: true
      - desc: '** testNotEquivalent4'
        inputfile: patient-example.json
        expression: 1 !~ 2
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent5'
        inputfile: patient-example.json
        expression: '''a'' !~ ''a'''
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent6'
        inputfile: patient-example.json
        expression: '''a'' !~ ''A'''
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent7'
        inputfile: patient-example.json
        expression: '''a'' !~ ''b'''
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent8'
        inputfile: patient-example.json
        expression: 1.1 !~ 1.1
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent9'
        inputfile: patient-example.json
        expression: 1.1 !~ 1.2
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent10'
        inputfile: patient-example.json
        expression: 1.10 !~ 1.1
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent11'
        inputfile: patient-example.json
        expression: 0 !~ 0
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent12'
        inputfile: patient-example.json
        expression: 0.0 !~ 0
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent13'
        inputfile: patient-example.json
        expression: 1.2 / 1.8 !~ 0.6
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent14'
        inputfile: patient-example.json
        expression: '@2012-04-15 !~ @2012-04-15'
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent15'
        inputfile: patient-example.json
        expression: '@2012-04-15 !~ @2012-04-16'
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent16'
        inputfile: patient-example.json
        expression: '@2012-04-15 !~ @2012-04-15T10:00:00'
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent17'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 !~ @2012-04-15T15:30:31.0'
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent18'
        inputfile: patient-example.json
        expression: '@2012-04-15T15:30:31 !~ @2012-04-15T15:30:31.1'
        result:
          - true
        model: r5
      - desc: '** testNotEquivalent19'
        inputfile: patient-example.json
        expression: name !~ name
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent20'
        inputfile: patient-example.json
        expression: >-
          name.take(2).given !~ name.take(2).first().given |
          name.take(2).last().given
        result:
          - false
        model: r5
      - desc: '** testNotEquivalent21'
        inputfile: patient-example.json
        expression: >-
          name.take(2).given !~ name.take(2).last().given |
          name.take(2).first().given
        result:
          - false
        model: r5
        disable: true
      - desc: '** testNotEquivalent22'
        inputfile: observation-example.json
        expression: Observation.value !~ 185 'kg'
        result:
          - true
        model: r5
  - 'group: testLessThan':
      - desc: '** testLessThan1'
        inputfile: patient-example.json
        expression: 1 < 2
        result:
          - true
        model: r5
      - desc: '** testLessThan2'
        inputfile: patient-example.json
        expression: 1.0 < 1.2
        result:
          - true
        model: r5
      - desc: '** testLessThan3'
        inputfile: patient-example.json
        expression: '''a'' < ''b'''
        result:
          - true
        model: r5
      - desc: '** testLessThan4'
        inputfile: patient-example.json
        expression: '''A'' < ''a'''
        result:
          - true
        model: r5
      - desc: '** testLessThan5'
        inputfile: patient-example.json
        expression: '@2014-12-12 < @2014-12-13'
        result:
          - true
        model: r5
      - desc: '** testLessThan6'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 < @2014-12-13T12:00:01'
        result:
          - true
        model: r5
      - desc: '** testLessThan7'
        inputfile: patient-example.json
        expression: '@T12:00:00 < @T14:00:00'
        result:
          - true
        model: r5
      - desc: '** testLessThan8'
        inputfile: patient-example.json
        expression: 1 < 1
        result:
          - false
        model: r5
      - desc: '** testLessThan9'
        inputfile: patient-example.json
        expression: 1.0 < 1.0
        result:
          - false
        model: r5
      - desc: '** testLessThan10'
        inputfile: patient-example.json
        expression: '''a'' < ''a'''
        result:
          - false
        model: r5
      - desc: '** testLessThan11'
        inputfile: patient-example.json
        expression: '''A'' < ''A'''
        result:
          - false
        model: r5
      - desc: '** testLessThan12'
        inputfile: patient-example.json
        expression: '@2014-12-12 < @2014-12-12'
        result:
          - false
        model: r5
      - desc: '** testLessThan13'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 < @2014-12-13T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessThan14'
        inputfile: patient-example.json
        expression: '@T12:00:00 < @T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessThan15'
        inputfile: patient-example.json
        expression: 2 < 1
        result:
          - false
        model: r5
      - desc: '** testLessThan16'
        inputfile: patient-example.json
        expression: 1.1 < 1.0
        result:
          - false
        model: r5
      - desc: '** testLessThan17'
        inputfile: patient-example.json
        expression: '''b'' < ''a'''
        result:
          - false
        model: r5
      - desc: '** testLessThan18'
        inputfile: patient-example.json
        expression: '''B'' < ''A'''
        result:
          - false
        model: r5
      - desc: '** testLessThan19'
        inputfile: patient-example.json
        expression: '@2014-12-13 < @2014-12-12'
        result:
          - false
        model: r5
      - desc: '** testLessThan20'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:01 < @2014-12-13T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessThan21'
        inputfile: patient-example.json
        expression: '@T12:00:01 < @T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessThan22'
        inputfile: observation-example.json
        expression: 'Observation.value < 200 ''[lb_av]'''
        result:
          - true
        model: r5
      - desc: '** testLessThan23'
        inputfile: patient-example.json
        expression: '@2018-03 < @2018-03-01'
        model: r5
        result: []
      - desc: '** testLessThan24'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30 < @2018-03-01T10:30:00'
        model: r5
        result: []
      - desc: '** testLessThan25'
        inputfile: patient-example.json
        expression: '@T10:30 < @T10:30:00'
        model: r5
        result: []
      - desc: '** testLessThan26'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30:00 < @2018-03-01T10:30:00.0'
        result:
          - false
        model: r5
      - desc: '** testLessThan27'
        inputfile: patient-example.json
        expression: '@T10:30:00 < @T10:30:00.0'
        result:
          - false
        model: r5
  - 'group: testLessOrEqual':
      - desc: '** testLessOrEqual1'
        inputfile: patient-example.json
        expression: 1 <= 2
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual2'
        inputfile: patient-example.json
        expression: 1.0 <= 1.2
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual3'
        inputfile: patient-example.json
        expression: '''a'' <= ''b'''
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual4'
        inputfile: patient-example.json
        expression: '''A'' <= ''a'''
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual5'
        inputfile: patient-example.json
        expression: '@2014-12-12 <= @2014-12-13'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual6'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 <= @2014-12-13T12:00:01'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual7'
        inputfile: patient-example.json
        expression: '@T12:00:00 <= @T14:00:00'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual8'
        inputfile: patient-example.json
        expression: 1 <= 1
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual9'
        inputfile: patient-example.json
        expression: 1.0 <= 1.0
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual10'
        inputfile: patient-example.json
        expression: '''a'' <= ''a'''
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual11'
        inputfile: patient-example.json
        expression: '''A'' <= ''A'''
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual12'
        inputfile: patient-example.json
        expression: '@2014-12-12 <= @2014-12-12'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual13'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 <= @2014-12-13T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual14'
        inputfile: patient-example.json
        expression: '@T12:00:00 <= @T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual15'
        inputfile: patient-example.json
        expression: 2 <= 1
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual16'
        inputfile: patient-example.json
        expression: 1.1 <= 1.0
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual17'
        inputfile: patient-example.json
        expression: '''b'' <= ''a'''
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual18'
        inputfile: patient-example.json
        expression: '''B'' <= ''A'''
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual19'
        inputfile: patient-example.json
        expression: '@2014-12-13 <= @2014-12-12'
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual20'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:01 <= @2014-12-13T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual21'
        inputfile: patient-example.json
        expression: '@T12:00:01 <= @T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testLessOrEqual22'
        inputfile: observation-example.json
        expression: 'Observation.value <= 200 ''[lb_av]'''
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual23'
        inputfile: patient-example.json
        expression: '@2018-03 <= @2018-03-01'
        model: r5
        result: []
      - desc: '** testLessOrEqual24'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30 <= @2018-03-01T10:30:00'
        model: r5
        result: []
      - desc: '** testLessOrEqual25'
        inputfile: patient-example.json
        expression: '@T10:30 <= @T10:30:00'
        model: r5
        result: []
      - desc: '** testLessOrEqual26'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30:00  <= @2018-03-01T10:30:00.0'
        result:
          - true
        model: r5
      - desc: '** testLessOrEqual27'
        inputfile: patient-example.json
        expression: '@T10:30:00 <= @T10:30:00.0'
        result:
          - true
        model: r5
  - 'group: testGreatorOrEqual':
      - desc: '** testGreatorOrEqual1'
        inputfile: patient-example.json
        expression: 1 >= 2
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual2'
        inputfile: patient-example.json
        expression: 1.0 >= 1.2
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual3'
        inputfile: patient-example.json
        expression: '''a'' >= ''b'''
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual4'
        inputfile: patient-example.json
        expression: '''A'' >= ''a'''
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual5'
        inputfile: patient-example.json
        expression: '@2014-12-12 >= @2014-12-13'
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual6'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 >= @2014-12-13T12:00:01'
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual7'
        inputfile: patient-example.json
        expression: '@T12:00:00 >= @T14:00:00'
        result:
          - false
        model: r5
      - desc: '** testGreatorOrEqual8'
        inputfile: patient-example.json
        expression: 1 >= 1
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual9'
        inputfile: patient-example.json
        expression: 1.0 >= 1.0
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual10'
        inputfile: patient-example.json
        expression: '''a'' >= ''a'''
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual11'
        inputfile: patient-example.json
        expression: '''A'' >= ''A'''
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual12'
        inputfile: patient-example.json
        expression: '@2014-12-12 >= @2014-12-12'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual13'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 >= @2014-12-13T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual14'
        inputfile: patient-example.json
        expression: '@T12:00:00 >= @T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual15'
        inputfile: patient-example.json
        expression: 2 >= 1
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual16'
        inputfile: patient-example.json
        expression: 1.1 >= 1.0
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual17'
        inputfile: patient-example.json
        expression: '''b'' >= ''a'''
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual18'
        inputfile: patient-example.json
        expression: '''B'' >= ''A'''
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual19'
        inputfile: patient-example.json
        expression: '@2014-12-13 >= @2014-12-12'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual20'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:01 >= @2014-12-13T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual21'
        inputfile: patient-example.json
        expression: '@T12:00:01 >= @T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual22'
        inputfile: observation-example.json
        expression: 'Observation.value >= 100 ''[lb_av]'''
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual23'
        inputfile: patient-example.json
        expression: '@2018-03 >= @2018-03-01'
        model: r5
        result: []
      - desc: '** testGreatorOrEqual24'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30 >= @2018-03-01T10:30:00'
        model: r5
        result: []
      - desc: '** testGreatorOrEqual25'
        inputfile: patient-example.json
        expression: '@T10:30 >= @T10:30:00'
        model: r5
        result: []
      - desc: '** testGreatorOrEqual26'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30:00 >= @2018-03-01T10:30:00.0'
        result:
          - true
        model: r5
      - desc: '** testGreatorOrEqual27'
        inputfile: patient-example.json
        expression: '@T10:30:00 >= @T10:30:00.0'
        result:
          - true
        model: r5
  - 'group: testGreaterThan':
      - desc: '** testGreaterThan1'
        inputfile: patient-example.json
        expression: 1 > 2
        result:
          - false
        model: r5
      - desc: '** testGreaterThan2'
        inputfile: patient-example.json
        expression: 1.0 > 1.2
        result:
          - false
        model: r5
      - desc: '** testGreaterThan3'
        inputfile: patient-example.json
        expression: '''a'' > ''b'''
        result:
          - false
        model: r5
      - desc: '** testGreaterThan4'
        inputfile: patient-example.json
        expression: '''A'' > ''a'''
        result:
          - false
        model: r5
      - desc: '** testGreaterThan5'
        inputfile: patient-example.json
        expression: '@2014-12-12 > @2014-12-13'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan6'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 > @2014-12-13T12:00:01'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan7'
        inputfile: patient-example.json
        expression: '@T12:00:00 > @T14:00:00'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan8'
        inputfile: patient-example.json
        expression: 1 > 1
        result:
          - false
        model: r5
      - desc: '** testGreaterThan9'
        inputfile: patient-example.json
        expression: 1.0 > 1.0
        result:
          - false
        model: r5
      - desc: '** testGreaterThan10'
        inputfile: patient-example.json
        expression: '''a'' > ''a'''
        result:
          - false
        model: r5
      - desc: '** testGreaterThan11'
        inputfile: patient-example.json
        expression: '''A'' > ''A'''
        result:
          - false
        model: r5
      - desc: '** testGreaterThan12'
        inputfile: patient-example.json
        expression: '@2014-12-12 > @2014-12-12'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan13'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:00 > @2014-12-13T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan14'
        inputfile: patient-example.json
        expression: '@T12:00:00 > @T12:00:00'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan15'
        inputfile: patient-example.json
        expression: 2 > 1
        result:
          - true
        model: r5
      - desc: '** testGreaterThan16'
        inputfile: patient-example.json
        expression: 1.1 > 1.0
        result:
          - true
        model: r5
      - desc: '** testGreaterThan17'
        inputfile: patient-example.json
        expression: '''b'' > ''a'''
        result:
          - true
        model: r5
      - desc: '** testGreaterThan18'
        inputfile: patient-example.json
        expression: '''B'' > ''A'''
        result:
          - true
        model: r5
      - desc: '** testGreaterThan19'
        inputfile: patient-example.json
        expression: '@2014-12-13 > @2014-12-12'
        result:
          - true
        model: r5
      - desc: '** testGreaterThan20'
        inputfile: patient-example.json
        expression: '@2014-12-13T12:00:01 > @2014-12-13T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreaterThan21'
        inputfile: patient-example.json
        expression: '@T12:00:01 > @T12:00:00'
        result:
          - true
        model: r5
      - desc: '** testGreaterThan22'
        inputfile: observation-example.json
        expression: 'Observation.value > 100 ''[lb_av]'''
        result:
          - true
        model: r5
      - desc: '** testGreaterThan23'
        inputfile: patient-example.json
        expression: '@2018-03 > @2018-03-01'
        model: r5
        result: []
      - desc: '** testGreaterThan24'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30 > @2018-03-01T10:30:00'
        model: r5
        result: []
      - desc: '** testGreaterThan25'
        inputfile: patient-example.json
        expression: '@T10:30 > @T10:30:00'
        model: r5
        result: []
      - desc: '** testGreaterThan26'
        inputfile: patient-example.json
        expression: '@2018-03-01T10:30:00 > @2018-03-01T10:30:00.0'
        result:
          - false
        model: r5
      - desc: '** testGreaterThan27'
        inputfile: patient-example.json
        expression: '@T10:30:00 > @T10:30:00.0'
        result:
          - false
        model: r5
  - 'group: testCombine()':
      - desc: '** testCombine1'
        inputfile: codesystem-example.json
        expression: concept.code.combine($this.descendants().concept.code).isDistinct()
        result:
          - false
        model: r5
      - desc: '** testCombine2'
        inputfile: patient-example.json
        expression: name.given.combine(name.family).exclude('Jim')
        result:
          - Peter
          - James
          - Peter
          - James
          - Chalmers
          - Windsor
        model: r5
      - desc: '** testCombine3'
        inputfile: patient-example.json
        expression: name.given.combine($this.name.family).exclude('Jim')
        result:
          - Peter
          - James
          - Peter
          - James
          - Chalmers
          - Windsor
        model: r5
  - 'group: testUnion':
      - desc: '** testUnion1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).count() = 3
        result:
          - true
        model: r5
      - desc: '** testUnion2'
        inputfile: patient-example.json
        expression: (1 | 2 | 2).count() = 2
        result:
          - true
        model: r5
      - desc: '** testUnion3'
        inputfile: patient-example.json
        expression: (1|1).count() = 1
        result:
          - true
        model: r5
      - desc: '** testUnion4'
        inputfile: patient-example.json
        expression: 1.union(2).union(3).count() = 3
        result:
          - true
        model: r5
      - desc: '** testUnion5'
        inputfile: patient-example.json
        expression: 1.union(2.union(3)).count() = 3
        result:
          - true
        model: r5
      - desc: '** testUnion6'
        inputfile: patient-example.json
        expression: (1 | 2).combine(2).count() = 3
        result:
          - true
        model: r5
      - desc: '** testUnion7'
        inputfile: patient-example.json
        expression: 1.combine(1).count() = 2
        result:
          - true
        model: r5
      - desc: '** testUnion8'
        inputfile: patient-example.json
        expression: 1.combine(1).union(2).count() = 2
        result:
          - true
        model: r5
      - desc: '** testUnion9'
        inputfile: patient-example.json
        expression: name.select(use | given).count()
        result:
          - 8
        model: r5
      - desc: '** testUnion10'
        inputfile: patient-example.json
        expression: name.select(use.union($this.given)).count()
        result:
          - 8
        model: r5
      - desc: '** testUnion11'
        inputfile: patient-example.json
        expression: name.select(use.union(given)).count()
        result:
          - 8
        model: r5
  - 'group: testIntersect':
      - desc: '** testIntersect1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).intersect(2 | 4) = 2
        result:
          - true
        model: r5
      - desc: '** testIntersect2'
        inputfile: patient-example.json
        expression: (1 | 2).intersect(4).empty()
        result:
          - true
        model: r5
      - desc: '** testIntersect3'
        inputfile: patient-example.json
        expression: '(1 | 2).intersect({}).empty()'
        result:
          - true
        model: r5
      - desc: '** testIntersect4'
        inputfile: patient-example.json
        expression: 1.combine(1).intersect(1).count() = 1
        result:
          - true
        model: r5
  - 'group: testExclude':
      - desc: '** testExclude1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3).exclude(2 | 4) = 1 | 3
        result:
          - true
        model: r5
      - desc: '** testExclude2'
        inputfile: patient-example.json
        expression: (1 | 2).exclude(4) = 1 | 2
        result:
          - true
        model: r5
      - desc: '** testExclude3'
        inputfile: patient-example.json
        expression: '(1 | 2).exclude({}) = 1 | 2'
        result:
          - true
        model: r5
      - desc: '** testExclude4'
        inputfile: patient-example.json
        expression: 1.combine(1).exclude(2).count() = 2
        result:
          - true
        model: r5
  - 'group: testIn':
      - desc: '** testIn1'
        inputfile: patient-example.json
        expression: 1 in (1 | 2 | 3)
        result:
          - true
        model: r5
      - desc: '** testIn2'
        inputfile: patient-example.json
        expression: 1 in (2 | 3)
        result:
          - false
        model: r5
      - desc: '** testIn3'
        inputfile: patient-example.json
        expression: '''a'' in (''a'' | ''c'' | ''d'')'
        result:
          - true
        model: r5
      - desc: '** testIn4'
        inputfile: patient-example.json
        expression: '''b'' in (''a'' | ''c'' | ''d'')'
        result:
          - false
        model: r5
  - 'group: testContainsCollection':
      - desc: '** testContainsCollection1'
        inputfile: patient-example.json
        expression: (1 | 2 | 3) contains 1
        result:
          - true
        model: r5
      - desc: '** testContainsCollection2'
        inputfile: patient-example.json
        expression: '(2 | 3) contains 1 '
        result:
          - false
        model: r5
      - desc: '** testContainsCollection3'
        inputfile: patient-example.json
        expression: ('a' | 'c' | 'd') contains 'a'
        result:
          - true
        model: r5
      - desc: '** testContainsCollection4'
        inputfile: patient-example.json
        expression: ('a' | 'c' | 'd') contains 'b'
        result:
          - false
        model: r5
  - 'group: testBooleanLogicAnd':
      - desc: '** testBooleanLogicAnd1'
        inputfile: patient-example.json
        expression: (true and true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd2'
        inputfile: patient-example.json
        expression: (true and false) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd3'
        inputfile: patient-example.json
        expression: '(true and {}).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd4'
        inputfile: patient-example.json
        expression: (false and true) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd5'
        inputfile: patient-example.json
        expression: (false and false) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd6'
        inputfile: patient-example.json
        expression: '(false and {}) = false'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd7'
        inputfile: patient-example.json
        expression: '({} and true).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd8'
        inputfile: patient-example.json
        expression: '({} and false) = false'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicAnd9'
        inputfile: patient-example.json
        expression: '({} and {}).empty()'
        result:
          - true
        model: r5
  - 'group: testBooleanLogicOr':
      - desc: '** testBooleanLogicOr1'
        inputfile: patient-example.json
        expression: (true or true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr2'
        inputfile: patient-example.json
        expression: (true or false) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr3'
        inputfile: patient-example.json
        expression: '(true or {}) = true'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr4'
        inputfile: patient-example.json
        expression: (false or true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr5'
        inputfile: patient-example.json
        expression: (false or false) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr6'
        inputfile: patient-example.json
        expression: '(false or {}).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr7'
        inputfile: patient-example.json
        expression: '({} or true) = true'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr8'
        inputfile: patient-example.json
        expression: '({} or false).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicOr9'
        inputfile: patient-example.json
        expression: '({} or {}).empty()'
        result:
          - true
        model: r5
  - 'group: testBooleanLogicXOr':
      - desc: '** testBooleanLogicXOr1'
        inputfile: patient-example.json
        expression: (true xor true) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr2'
        inputfile: patient-example.json
        expression: (true xor false) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr3'
        inputfile: patient-example.json
        expression: '(true xor {}).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr4'
        inputfile: patient-example.json
        expression: (false xor true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr5'
        inputfile: patient-example.json
        expression: (false xor false) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr6'
        inputfile: patient-example.json
        expression: '(false xor {}).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr7'
        inputfile: patient-example.json
        expression: '({} xor true).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr8'
        inputfile: patient-example.json
        expression: '({} xor false).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanLogicXOr9'
        inputfile: patient-example.json
        expression: '({} xor {}).empty()'
        result:
          - true
        model: r5
  - 'group: testBooleanImplies':
      - desc: '** testBooleanImplies1'
        inputfile: patient-example.json
        expression: (true implies true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies2'
        inputfile: patient-example.json
        expression: (true implies false) = false
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies3'
        inputfile: patient-example.json
        expression: '(true implies {}).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies4'
        inputfile: patient-example.json
        expression: (false implies true) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies5'
        inputfile: patient-example.json
        expression: (false implies false) = true
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies6'
        inputfile: patient-example.json
        expression: '(false implies {}) = true'
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies7'
        inputfile: patient-example.json
        expression: '({} implies true) = true'
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies8'
        inputfile: patient-example.json
        expression: '({} implies false).empty()'
        result:
          - true
        model: r5
      - desc: '** testBooleanImplies9'
        inputfile: patient-example.json
        expression: '({} implies {}).empty()'
        result:
          - true
        model: r5
  - 'group: testPlus':
      - desc: '** testPlus1'
        inputfile: patient-example.json
        expression: 1 + 1 = 2
        result:
          - true
        model: r5
      - desc: '** testPlus2'
        inputfile: patient-example.json
        expression: 1 + 0 = 1
        result:
          - true
        model: r5
      - desc: '** testPlus3'
        inputfile: patient-example.json
        expression: 1.2 + 1.8 = 3.0
        result:
          - true
        model: r5
      - desc: '** testPlus4'
        inputfile: patient-example.json
        expression: '''a''+''b'' = ''ab'''
        result:
          - true
        model: r5
      - desc: '** testPlusDate1'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 7 days'
        result:
          - '1974-01-01'
        model: r5
      - desc: '** testPlusDate2'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 7.7 days'
        result:
          - '1974-01-01'
        model: r5
      - desc: '** testPlusDate3'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 7 days'
        result:
          - '1974-01-01T00:00:00.000+10:00'
        model: r5
      - desc: '** testPlusDate4'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 7.7 days'
        result:
          - '1974-01-01T00:00:00.000+10:00'
        model: r5
      - desc: '** testPlusDate5'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 second'
        result:
          - '1973-12-25T00:00:01.000+10:00'
        model: r5
      - desc: '** testPlusDate6'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 10 millisecond'
        result:
          - '1973-12-25T00:00:00.010+10:00'
        model: r5
      - desc: '** testPlusDate7'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 minute'
        result:
          - '1973-12-25T00:01:00.000+10:00'
        model: r5
      - desc: '** testPlusDate8'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 hour'
        result:
          - '1973-12-25T01:00:00.000+10:00'
        model: r5
      - desc: '** testPlusDate9'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 day'
        result:
          - '1973-12-26'
        model: r5
      - desc: '** testPlusDate10'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 month'
        result:
          - '1974-01-25'
        model: r5
      - desc: '** testPlusDate11'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 week'
        result:
          - '1974-01-01'
        model: r5
      - desc: '** testPlusDate12'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 year'
        result:
          - '1974-12-25'
        model: r5
      - desc: '** testPlusDate13'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 ''d'''
        result:
          - '1973-12-26'
        model: r5
        disable: true
      - desc: '** testPlusDate14'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 ''mo'''
        error: true
        model: r5
      - desc: '** testPlusDate15'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 ''wk'''
        result:
          - '1974-01-01'
        model: r5
        disable: true
      - desc: '** testPlusDate16'
        inputfile: patient-example.json
        expression: '@1973-12-25 + 1 ''a'''
        error: true
        model: r5
      - desc: '** testPlusDate17'
        inputfile: patient-example.json
        expression: '@1975-12-25 + 1 ''a'''
        error: true
        model: r5
      - desc: '** testPlusDate18'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 ''s'''
        result:
          - '1973-12-25T00:00:01.000+10:00'
        model: r5
      - desc: '** testPlusDate19'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 0.1 ''s'''
        result:
          - '1973-12-25T00:00:00.000+10:00'
        model: r5
        disable: true
      - desc: '** testPlusDate20'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 10 ''ms'''
        result:
          - '1973-12-25T00:00:00.010+10:00'
        model: r5
      - desc: '** testPlusDate21'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 ''min'''
        result:
          - '1973-12-25T00:01:00.000+10:00'
        model: r5
        disable: true
      - desc: '** testPlusDate22'
        inputfile: patient-example.json
        expression: '@1973-12-25T00:00:00.000+10:00 + 1 ''h'''
        result:
          - '1973-12-25T01:00:00.000+10:00'
        model: r5
        disable: true
      - desc: '** testPlus6'
        inputfile: patient-example.json
        expression: '@1974-12-25 + 7'
        error: true
        model: r5
  - 'group: testConcatenate':
      - desc: '** testConcatenate1'
        inputfile: patient-example.json
        expression: '''a'' & ''b'' = ''ab'''
        result:
          - true
        model: r5
      - desc: '** testConcatenate2'
        inputfile: patient-example.json
        expression: '''1'' & {} = ''1'''
        result:
          - true
        model: r5
      - desc: '** testConcatenate3'
        inputfile: patient-example.json
        expression: '{} & ''b'' = ''b'''
        result:
          - true
        model: r5
      - desc: '** testConcatenate4'
        inputfile: patient-example.json
        expression: '(1 | 2 | 3) & ''b'' = ''1,2,3b'''
        error: true
        model: r5
  - 'group: testMinus':
      - desc: '** testMinus1'
        inputfile: patient-example.json
        expression: 1 - 1 = 0
        result:
          - true
        model: r5
      - desc: '** testMinus2'
        inputfile: patient-example.json
        expression: 1 - 0 = 1
        result:
          - true
        model: r5
      - desc: '** testMinus3'
        inputfile: patient-example.json
        expression: 1.8 - 1.2 = 0.6
        result:
          - true
        model: r5
      - desc: '** testMinus4'
        inputfile: patient-example.json
        expression: '''a''-''b'' = ''ab'''
        error: true
        model: r5
      - desc: '** testMinus5'
        inputfile: patient-example.json
        expression: '@1974-12-25 - 1 ''month'''
        result:
          - '1974-11-25'
        model: r5
        disable: true
      - desc: '** testMinus6'
        inputfile: patient-example.json
        expression: '@1974-12-25 - 1 ''cm'''
        error: true
        model: r5
  - 'group: testMultiply':
      - desc: '** testMultiply1'
        inputfile: patient-example.json
        expression: 1 * 1 = 1
        result:
          - true
        model: r5
      - desc: '** testMultiply2'
        inputfile: patient-example.json
        expression: 1 * 0 = 0
        result:
          - true
        model: r5
      - desc: '** testMultiply3'
        inputfile: patient-example.json
        expression: 1.2 * 1.8 = 2.16
        result:
          - true
        model: r5
  - 'group: testDivide':
      - desc: '** testDivide1'
        inputfile: patient-example.json
        expression: 1 / 1 = 1
        result:
          - true
        model: r5
      - desc: '** testDivide2'
        inputfile: patient-example.json
        expression: 4 / 2 = 2
        result:
          - true
        model: r5
      - desc: '** testDivide3'
        inputfile: patient-example.json
        expression: 4.0 / 2.0 = 2.0
        result:
          - true
        model: r5
      - desc: '** testDivide4'
        inputfile: patient-example.json
        expression: 1 / 2 = 0.5
        result:
          - true
        model: r5
      - desc: '** testDivide5'
        inputfile: patient-example.json
        expression: (1.2 / 1.8).round(2) = 0.67
        result:
          - true
        model: r5
      - desc: '** testDivide6'
        inputfile: patient-example.json
        expression: 1 / 0
        model: r5
        result: []
  - 'group: testDiv':
      - desc: '** testDiv1'
        inputfile: patient-example.json
        expression: 1 div 1 = 1
        result:
          - true
        model: r5
      - desc: '** testDiv2'
        inputfile: patient-example.json
        expression: 4 div 2 = 2
        result:
          - true
        model: r5
      - desc: '** testDiv3'
        inputfile: patient-example.json
        expression: 5 div 2 = 2
        result:
          - true
        model: r5
      - desc: '** testDiv4'
        inputfile: patient-example.json
        expression: 2.2 div 1.8 = 1
        result:
          - true
        model: r5
      - desc: '** testDiv5'
        inputfile: patient-example.json
        expression: 5 div 0
        model: r5
        result: []
  - 'group: testMod':
      - desc: '** testMod1'
        inputfile: patient-example.json
        expression: 1 mod 1 = 0
        result:
          - true
        model: r5
      - desc: '** testMod2'
        inputfile: patient-example.json
        expression: 4 mod 2 = 0
        result:
          - true
        model: r5
      - desc: '** testMod3'
        inputfile: patient-example.json
        expression: 5 mod 2 = 1
        result:
          - true
        model: r5
      - desc: '** testMod4'
        inputfile: patient-example.json
        expression: 2.2 mod 1.8 = 0.4
        result:
          - true
        model: r5
      - desc: '** testMod5'
        inputfile: patient-example.json
        expression: 5 mod 0
        model: r5
        result: []
  - 'group: testRound':
      - desc: '** testRound1'
        inputfile: patient-example.json
        expression: 1.round() = 1
        result:
          - true
        model: r5
      - desc: '** testRound2'
        inputfile: patient-example.json
        expression: 3.14159.round(3) = 3.142
        result:
          - true
        model: r5
  - 'group: testSqrt':
      - desc: '** testSqrt1'
        inputfile: patient-example.json
        expression: 81.sqrt() = 9.0
        result:
          - true
        model: r5
      - desc: '** testSqrt2'
        inputfile: patient-example.json
        expression: (-1).sqrt()
        model: r5
        result: []
  - 'group: testAbs':
      - desc: '** testAbs1'
        inputfile: patient-example.json
        expression: (-5).abs() = 5
        result:
          - true
        model: r5
      - desc: '** testAbs2'
        inputfile: patient-example.json
        expression: (-5.5).abs() = 5.5
        result:
          - true
        model: r5
      - desc: '** testAbs3'
        inputfile: patient-example.json
        expression: (-5.5 'mg').abs() = 5.5 'mg'
        result:
          - true
        model: r5
  - 'group: testCeiling':
      - desc: '** testCeiling1'
        inputfile: patient-example.json
        expression: 1.ceiling() = 1
        result:
          - true
        model: r5
      - desc: '** testCeiling2'
        inputfile: patient-example.json
        expression: (-1.1).ceiling() = -1
        result:
          - true
        model: r5
      - desc: '** testCeiling3'
        inputfile: patient-example.json
        expression: 1.1.ceiling() = 2
        result:
          - true
        model: r5
  - 'group: testExp':
      - desc: '** testExp1'
        inputfile: patient-example.json
        expression: 0.exp() = 1
        result:
          - true
        model: r5
      - desc: '** testExp2'
        inputfile: patient-example.json
        expression: (-0.0).exp() = 1
        result:
          - true
        model: r5
      - desc: '** testExp3'
        inputfile: patient-example.json
        expression: '{}.exp().empty() = true'
        result:
          - true
        model: r5
  - 'group: testFloor':
      - desc: '** testFloor1'
        inputfile: patient-example.json
        expression: 1.floor() = 1
        result:
          - true
        model: r5
      - desc: '** testFloor2'
        inputfile: patient-example.json
        expression: 2.1.floor() = 2
        result:
          - true
        model: r5
      - desc: '** testFloor3'
        inputfile: patient-example.json
        expression: (-2.1).floor() = -3
        result:
          - true
        model: r5
  - 'group: testLn':
      - desc: '** testLn1'
        inputfile: patient-example.json
        expression: 1.ln() = 0.0
        result:
          - true
        model: r5
      - desc: '** testLn2'
        inputfile: patient-example.json
        expression: 1.0.ln() = 0.0
        result:
          - true
        model: r5
  - 'group: testLog':
      - desc: '** testLog1'
        inputfile: patient-example.json
        expression: 16.log(2) = 4.0
        result:
          - true
        model: r5
      - desc: '** testLog2'
        inputfile: patient-example.json
        expression: 100.0.log(10.0) = 2.0
        result:
          - true
        model: r5
  - 'group: testPower':
      - desc: '** testPower1'
        inputfile: patient-example.json
        expression: 2.power(3) = 8
        result:
          - true
        model: r5
      - desc: '** testPower2'
        inputfile: patient-example.json
        expression: 2.5.power(2) = 6.25
        result:
          - true
        model: r5
      - desc: '** testPower3'
        inputfile: patient-example.json
        expression: (-1).power(0.5)
        model: r5
        result: []
  - 'group: testTruncate':
      - desc: '** testTruncate1'
        inputfile: patient-example.json
        expression: 101.truncate() = 101
        result:
          - true
        model: r5
      - desc: '** testTruncate2'
        inputfile: patient-example.json
        expression: 1.00000001.truncate() = 1
        result:
          - true
        model: r5
      - desc: '** testTruncate3'
        inputfile: patient-example.json
        expression: (-1.56).truncate() = -1
        result:
          - true
        model: r5
  - 'group: testPrecedence':
      - desc: '** test unary precedence'
        inputfile: patient-example.json
        expression: '-1.convertsToInteger()'
        error: true
        model: r5
      - desc: '** testPrecedence2'
        inputfile: patient-example.json
        expression: 1+2*3+4 = 11
        result:
          - true
        model: r5
      - desc: '** testPrecedence3'
        inputfile: patient-example.json
        expression: 1 > 2 is Boolean
        result:
          - true
        model: r5
        disable: true
      - desc: '** testPrecedence4'
        inputfile: patient-example.json
        expression: 1 | 1 is Integer
        result:
          - true
        model: r5
        disable: true
      - desc: '** testPrecedence5'
        inputfile: observation-example.json
        expression: true and '0215' in ('0215' | '0216')
        result:
          - true
        model: r5
      - desc: '** testPrecedence6'
        inputfile: observation-example.json
        expression: >-
          category.exists(coding.exists(system =
          'http://terminology.hl7.org/CodeSystem/observation-category' and
          code.trace('c') in ('vital-signs' | 'vital-signs2').trace('codes')))
        result:
          - true
        model: r5
  - 'group: testVariables':
      - desc: '** testVariables1'
        inputfile: patient-example.json
        expression: '%sct = ''http://snomed.info/sct'''
        result:
          - true
        model: r5
        disable: true
      - desc: '** testVariables2'
        inputfile: patient-example.json
        expression: '%loinc = ''http://loinc.org'''
        result:
          - true
        model: r5
        disable: true
      - desc: '** testVariables3'
        inputfile: patient-example.json
        expression: '%ucum = ''http://unitsofmeasure.org'''
        result:
          - true
        model: r5
      - desc: '** testVariables4'
        inputfile: patient-example.json
        expression: >-
          %`vs-administrative-gender` =
          'http://hl7.org/fhir/ValueSet/administrative-gender'
        result:
          - true
        model: r5
        disable: true
  - 'group: testExtension':
      - desc: '** testExtension1'
        inputfile: patient-example.json
        expression: >-
          Patient.birthDate.extension('http://hl7.org/fhir/StructureDefinition/patient-birthTime').exists()
        result:
          - true
        model: r5
      - desc: '** testExtension2'
        inputfile: patient-example.json
        expression: Patient.birthDate.extension(%`ext-patient-birthTime`).exists()
        result:
          - true
        model: r5
        disable: true
      - desc: '** testExtension3'
        inputfile: patient-example.json
        expression: >-
          Patient.birthDate.extension('http://hl7.org/fhir/StructureDefinition/patient-birthTime1').empty()
        result:
          - true
        model: r5
  - 'group: testType':
      - desc: '** testType1'
        inputfile: patient-example.json
        expression: 1.type().namespace = 'System'
        result:
          - true
        model: r5
      - desc: '** testType1a'
        inputfile: patient-example.json
        expression: 1.type().name = 'Integer'
        result:
          - true
        model: r5
      - desc: '** testType2'
        inputfile: patient-example.json
        expression: '''1''.type().namespace = ''System'''
        result:
          - true
        model: r5
      - desc: '** testType2a'
        inputfile: patient-example.json
        expression: '''1''.type().name = ''String'''
        result:
          - true
        model: r5
      - desc: '** testType3'
        inputfile: patient-example.json
        expression: true.type().namespace = 'System'
        result:
          - true
        model: r5
      - desc: '** testType4'
        inputfile: patient-example.json
        expression: true.type().name = 'Boolean'
        result:
          - true
        model: r5
      - desc: '** testType5'
        inputfile: patient-example.json
        expression: true.is(Boolean)
        result:
          - true
        model: r5
      - desc: '** testType6'
        inputfile: patient-example.json
        expression: true.is(System.Boolean)
        result:
          - true
        model: r5
      - desc: '** testType7'
        inputfile: patient-example.json
        expression: true is Boolean
        result:
          - true
        model: r5
      - desc: '** testType8'
        inputfile: patient-example.json
        expression: true is System.Boolean
        result:
          - true
        model: r5
      - desc: '** testType9'
        inputfile: patient-example.json
        expression: Patient.active.type().namespace = 'FHIR'
        result:
          - true
        model: r5
      - desc: '** testType10'
        inputfile: patient-example.json
        expression: Patient.active.type().name = 'boolean'
        result:
          - true
        model: r5
      - desc: '** testType11'
        inputfile: patient-example.json
        expression: Patient.active.is(boolean)
        result:
          - true
        model: r5
      - desc: '** testType12'
        inputfile: patient-example.json
        expression: Patient.active.is(Boolean).not()
        result:
          - true
        model: r5
      - desc: '** testType13'
        inputfile: patient-example.json
        expression: Patient.active.is(FHIR.boolean)
        result:
          - true
        model: r5
      - desc: '** testType14'
        inputfile: patient-example.json
        expression: Patient.active.is(System.Boolean).not()
        result:
          - true
        model: r5
      - desc: '** testType15'
        inputfile: patient-example.json
        expression: Patient.type().namespace = 'FHIR'
        result:
          - true
        model: r5
      - desc: '** testType16'
        inputfile: patient-example.json
        expression: Patient.type().name = 'Patient'
        result:
          - true
        model: r5
      - desc: '** testType17'
        inputfile: patient-example.json
        expression: Patient.is(Patient)
        result:
          - true
        model: r5
      - desc: '** testType18'
        inputfile: patient-example.json
        expression: Patient.is(FHIR.Patient)
        result:
          - true
        model: r5
      - desc: '** testType19'
        inputfile: patient-example.json
        expression: Patient.is(FHIR.`Patient`)
        result:
          - true
        model: r5
      - desc: '** testType20'
        inputfile: patient-example.json
        expression: Patient.ofType(Patient).type().name
        result:
          - Patient
        model: r5
      - desc: '** testType21'
        inputfile: patient-example.json
        expression: Patient.ofType(FHIR.Patient).type().name
        result:
          - Patient
        model: r5
      - desc: '** testType22'
        inputfile: patient-example.json
        expression: Patient.is(System.Patient).not()
        result:
          - true
        model: r5
        disable: true
      - desc: '** testType23'
        inputfile: patient-example.json
        expression: Patient.ofType(FHIR.`Patient`).type().name
        result:
          - Patient
        model: r5
      - desc: '** testTypeA1'
        inputfile: parameters-example-types.json
        expression: 'Parameters.parameter[0].value.is(FHIR.string)'
        result:
          - true
        model: r5
      - desc: '** testTypeA2'
        inputfile: parameters-example-types.json
        expression: 'Parameters.parameter[1].value.is(FHIR.integer)'
        result:
          - true
        model: r5
      - desc: '** testTypeA3'
        inputfile: parameters-example-types.json
        expression: 'Parameters.parameter[2].value.is(FHIR.uuid)'
        result:
          - true
        model: r5
      - desc: '** testTypeA4'
        inputfile: parameters-example-types.json
        expression: 'Parameters.parameter[2].value.is(FHIR.uri)'
        result:
          - true
        model: r5
      - desc: '** testTypeA'
        inputfile: parameters-example-types.json
        expression: 'Parameters.parameter[3].value.is(FHIR.decimal)'
        result:
          - true
        model: r5
  - 'group: testConformsTo':
      - desc: '** testConformsTo1'
        inputfile: patient-example.json
        expression: 'conformsTo(''http://hl7.org/fhir/StructureDefinition/Patient'')'
        result:
          - true
        model: r5
      - desc: '** testConformsTo2'
        inputfile: patient-example.json
        expression: 'conformsTo(''http://hl7.org/fhir/StructureDefinition/Person'')'
        result:
          - false
        model: r5
      - desc: '** testConformsTo3'
        inputfile: patient-example.json
        expression: 'conformsTo(''http://trash'')'
        error: true
        model: r5
    disable: true
  - 'group: LowBoundary':
      - desc: '** LowBoundaryDecimalDefault'
        expression: 1.587.lowBoundary()
        result:
          - 1.5865
        model: r5
      - desc: '** LowBoundaryDecimal1'
        expression: 1.587.lowBoundary(6)
        result:
          - 1.5865
        model: r5
      - desc: '** LowBoundaryDecimal2'
        expression: 1.587.lowBoundary(2)
        result:
          - 1.58
        model: r5
      - desc: '** LowBoundaryDecimal3'
        expression: 1.587.lowBoundary(-1)
        model: r5
        result: []
      - desc: '** LowBoundaryDecimal4'
        expression: 1.587.lowBoundary(0)
        result:
          - 1
        model: r5
      - desc: '** LowBoundaryDecimal5'
        expression: 1.587.lowBoundary(32)
        model: r5
        result: []
      - desc: '** LowBoundaryNegDecimalDefault'
        expression: (-1.587).lowBoundary()
        result:
          - -1.5875
        model: r5
      - desc: '** LowBoundaryNegDecimal1'
        expression: (-1.587).lowBoundary(6)
        result:
          - -1.5875
        model: r5
      - desc: '** LowBoundaryNegDecimal2'
        expression: (-1.587).lowBoundary(2)
        result:
          - -1.59
        model: r5
      - desc: '** LowBoundaryNegDecimal3'
        expression: (-1.587).lowBoundary(-1)
        model: r5
        result: []
      - desc: '** LowBoundaryNegDecimal4'
        expression: (-1.587).lowBoundary(0)
        result:
          - -2
        model: r5
      - desc: '** LowBoundaryNegDecimal5'
        expression: (-1.587).lowBoundary(32)
        model: r5
        result: []
      - desc: '** LowBoundaryDecimal6'
        expression: 1.587.lowBoundary(39)
        model: r5
        result: []
      - desc: '** LowBoundaryDecimal7'
        expression: 1.toDecimal().lowBoundary()
        result:
          - 0.5
        model: r5
      - desc: '** LowBoundaryDecimal8'
        expression: 1.lowBoundary(0)
        result:
          - 0
        model: r5
      - desc: '** LowBoundaryDecimal9'
        expression: 1.lowBoundary(5)
        result:
          - 0.5
        model: r5
      - desc: '** LowBoundaryDecimal10'
        expression: 12.587.lowBoundary(2)
        result:
          - 12.58
        model: r5
      - desc: '** LowBoundaryDecimal11'
        expression: 12.500.lowBoundary(4)
        result:
          - 12.4995
        model: r5
      - desc: '** LowBoundaryDecimal12'
        expression: 120.lowBoundary(2)
        result:
          - 119.5
        model: r5
      - desc: '** LowBoundaryDecimal13'
        expression: (-120).lowBoundary(2)
        result:
          - -120.5
        model: r5
      - desc: '** LowBoundaryDecimal14'
        expression: 0.0034.lowBoundary(1)
        result:
          - 0
        model: r5
      - desc: '** LowBoundaryDecimal15'
        expression: (-0.0034).lowBoundary(1)
        result:
          - -0.0
        model: r5
      - desc: '** LowBoundaryQuantity'
        expression: 1.587 'cm'.lowBoundary(8)
        result:
          - 1.58650000 'cm'
        model: r5
      - desc: '** LowBoundaryDateMonth'
        expression: '@2014.lowBoundary(6)'
        result:
          - 2014-01
        model: r5
      - desc: '** LowBoundaryDateTimeMillisecond1'
        expression: '@2014-01-01T08.lowBoundary(17)'
        result:
          - '2014-01-01T08:00:00.000+14:00'
        model: r5
      - desc: '** LowBoundaryDateTimeMillisecond2'
        expression: '@2014-01-01T08:05+08:00.lowBoundary(17)'
        result:
          - '2014-01-01T08:05:00.000+08:00'
        model: r5
      - desc: '** LowBoundaryDateTimeMillisecond3'
        expression: '@2014-01-01T08.lowBoundary(8)'
        result:
          - '2014-01-01'
        model: r5
      - desc: '** LowBoundaryTimeMillisecond'
        expression: '@T10:30.lowBoundary(9)'
        result:
          - '10:30:00.000'
        model: r5
    disable: true
  - 'group: HighBoundary':
      - desc: '** HighBoundaryDecimalDefault'
        expression: 1.587.highBoundary()
        result:
          - 1.5875
        model: r5
      - desc: '** HighBoundaryDecimal1'
        expression: 1.587.highBoundary(2)
        result:
          - 1.59
        model: r5
      - desc: '** HighBoundaryDecimal2'
        expression: 1.587.highBoundary(6)
        result:
          - 1.5875
        model: r5
      - desc: '** HighBoundaryDecimal3'
        expression: 1.587.highBoundary(-1)
        model: r5
        result: []
      - desc: '** HighBoundaryDecimal4'
        expression: (-1.587).highBoundary()
        result:
          - -1.5865
        model: r5
      - desc: '** HighBoundaryDecimal5'
        expression: (-1.587).highBoundary(2)
        result:
          - -1.58
        model: r5
      - desc: '** HighBoundaryDecimal6'
        expression: (-1.587).highBoundary(6)
        result:
          - -1.5865
        model: r5
      - desc: '** HighBoundaryDecimal7'
        expression: 1.587.highBoundary(39)
        model: r5
        result: []
      - desc: '** HighBoundaryDecimal8'
        expression: 1.highBoundary()
        result:
          - 1.5
        model: r5
      - desc: '** HighBoundaryDecimal9'
        expression: 1.highBoundary(0)
        result:
          - 2
        model: r5
      - desc: '** HighBoundaryDecimal10'
        expression: 1.highBoundary(5)
        result:
          - 1.5
        model: r5
      - desc: '** HighBoundaryDecimal11'
        expression: 12.587.highBoundary(2)
        result:
          - 12.59
        model: r5
      - desc: '** HighBoundaryDecimal12'
        expression: 12.500.highBoundary(4)
        result:
          - 12.5005
        model: r5
      - desc: '** HighBoundaryDecimal13'
        expression: 120.highBoundary(2)
        result:
          - 120.5
        model: r5
      - desc: '** HighBoundaryDecimal14'
        expression: '-120.highBoundary(2)'
        result:
          - -120.5
        model: r5
      - desc: '** HighBoundaryDecimal15'
        expression: 0.0034.highBoundary(1)
        result:
          - 0
        model: r5
      - desc: '** HighBoundaryDecimal16'
        expression: '-0.0034.highBoundary(1)'
        result:
          - 0
        model: r5
      - desc: '** HighBoundaryDecimal'
        expression: 1.587.highBoundary(8)
        result:
          - 1.5875
        model: r5
      - desc: '** HighBoundaryQuantity'
        expression: 1.587 'm'.highBoundary(8)
        result:
          - 1.58750000 'm'
        model: r5
      - desc: '** HighBoundaryDateMonth'
        expression: '@2014.highBoundary(6)'
        result:
          - 2014-12
        model: r5
      - desc: '** HighBoundaryDateTimeMillisecond1'
        expression: '@2014-01-01T08.highBoundary(17)'
        result:
          - '2014-01-01T08:00:59.999-12:00'
        model: r5
      - desc: '** HighBoundaryDateTimeMillisecond2'
        expression: '@2014-01-01T08:05-05:00.highBoundary(17)'
        result:
          - '2014-01-01T08:05:59.999-05:00'
        model: r5
      - desc: '** HighBoundaryDateTimeMillisecond3'
        expression: '@2014-01-01T08.highBoundary(17)'
        result:
          - '2014-01-01T08:00:59.999-12:00'
        model: r5
      - desc: '** HighBoundaryTimeMillisecond'
        expression: '@T10:30.highBoundary(9)'
        result:
          - '10:30:59.999'
        model: r5
    disable: true
  - 'group: Comparable':
      - desc: '** Comparable1'
        expression: '1 ''cm''.comparable(1 ''[in_i]'')'
        result:
          - true
        model: r5
      - desc: '** Comparable2'
        expression: '1 ''cm''.comparable(1 ''[s]'')'
        result:
          - false
        model: r5
      - desc: '** Comparable3'
        expression: 1 'cm'.comparable(1 's')
        result:
          - false
        model: r5
    disable: true
  - 'group: Precision':
      - desc: '** PrecisionDecimal'
        expression: 1.58700.precision()
        result:
          - 5
        model: r5
      - desc: '** PrecisionYear'
        expression: '@2014.precision()'
        result:
          - 4
        model: r5
      - desc: '** PrecisionDateTimeMilliseconds'
        expression: '@2014-01-05T10:30:00.000.precision()'
        result:
          - 17
        model: r5
      - desc: '** PrecisionTimeMinutes'
        expression: '@T10:30.precision()'
        result:
          - 4
        model: r5
      - desc: '** PrecisionTimeMilliseconds'
        expression: '@T10:30:00.000.precision()'
        result:
          - 9
        model: r5
    disable: true
  - 'group: from-Zulip':
      - desc: '** from-zulip-1'
        inputfile: patient-example.json
        expression: (true and 'foo').empty()
        result:
          - false
        model: r5
      - desc: '** from-zulip-2'
        inputfile: patient-example.json
        expression: (true | 'foo').allTrue()
        error: true
        result:
          - false
        model: r5
  - 'group: polymorphics':
      - desc: '** testPolymorphicsA'
        inputfile: observation-example.json
        expression: Observation.value.exists()
        result:
          - true
        model: r5
      - desc: '** testPolymorphicsB'
        inputfile: observation-example.json
        expression: Observation.valueQuantity.exists()
        error: true
        result:
          - false
        model: r5
        disable: true
  - 'group: index-part':
      - desc: '** testIndex'
        inputfile: patient-example.json
        expression: 'Patient.telecom.select(iif(value=''(03) 3410 5613'', $index, {} ))'
        result:
          - 2
        model: r5
  - 'group: period':
      - desc: '** testPeriodInvariantOld'
        inputfile: patient-example-period.json
        expression: >-
          Patient.identifier.period.all(start.hasValue().not() or
          end.hasValue().not() or (start <= end))
        result:
          - false
        model: r5
      - desc: '** testPeriodInvariantNew'
        inputfile: patient-example-period.json
        expression: >-
          Patient.identifier.period.all(start.empty() or end.empty() or
          (start.lowBoundary() < end.highBoundary()))
        result:
          - true
        model: r5
        disable: true
  - 'group: testInheritance':
      - desc: '** testFHIRPathIsFunction1'
        inputfile: patient-example.json
        expression: Patient.gender.is(code)
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction2'
        inputfile: patient-example.json
        expression: Patient.gender.is(string)
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction3'
        inputfile: patient-example.json
        expression: Patient.gender.is(id)
        result:
          - false
        model: r5
      - desc: '** testFHIRPathIsFunction4'
        inputfile: questionnaire-example.json
        expression: Questionnaire.url.is(uri)
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction5'
        inputfile: questionnaire-example.json
        expression: Questionnaire.url.is(url)
        result:
          - false
        model: r5
      - desc: '** testFHIRPathIsFunction6'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.is(string)
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction7'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.is(code)
        result:
          - false
        model: r5
      - desc: '** testFHIRPathIsFunction8'
        inputfile: observation-example.json
        expression: >-
          Observation.extension('http://example.com/fhir/StructureDefinition/patient-age').value
          is Age
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction9'
        inputfile: observation-example.json
        expression: >-
          Observation.extension('http://example.com/fhir/StructureDefinition/patient-age').value
          is Quantity
        result:
          - true
        model: r5
      - desc: '** testFHIRPathIsFunction10'
        inputfile: observation-example.json
        expression: >-
          Observation.extension('http://example.com/fhir/StructureDefinition/patient-age').value
          is Duration
        result:
          - false
        model: r5
      - desc: '** testFHIRPathAsFunction11'
        inputfile: patient-example.json
        expression: Patient.gender.as(string)
        model: r5
        result: []
        disable: true
      - desc: '** testFHIRPathAsFunction12'
        inputfile: patient-example.json
        expression: Patient.gender.as(code)
        result:
          - male
        model: r5
      - desc: '** testFHIRPathAsFunction13'
        inputfile: patient-example.json
        expression: Patient.gender.as(id)
        model: r5
        result: []
      - desc: '** testFHIRPathAsFunction14'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.as(string)
        result:
          - '20150622'
        model: r5
      - desc: '** testFHIRPathAsFunction15'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.as(code)
        model: r5
        result: []
      - desc: '** testFHIRPathAsFunction16'
        inputfile: patient-example.json
        expression: Patient.gender.ofType(string)
        model: r5
        result: []
        disable: true
      - desc: '** testFHIRPathAsFunction17'
        inputfile: patient-example.json
        expression: Patient.gender.ofType(code)
        result:
          - male
        model: r5
      - desc: '** testFHIRPathAsFunction18'
        inputfile: patient-example.json
        expression: Patient.gender.ofType(id)
        model: r5
        result: []
      - desc: '** testFHIRPathAsFunction19'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.ofType(string)
        result:
          - '20150622'
        model: r5
      - desc: '** testFHIRPathAsFunction20'
        inputfile: valueset-example-expansion.json
        expression: ValueSet.version.ofType(code)
        model: r5
        result: []
      - desc: '** testFHIRPathAsFunction21'
        inputfile: patient-example.json
        expression: Patient.name.as(HumanName).use
        error: true
        model: r5
      - desc: '** testFHIRPathAsFunction22'
        inputfile: patient-example.json
        expression: Patient.name.ofType(HumanName).use
        result:
          - official
          - usual
          - maiden
        model: r5
      - desc: '** testFHIRPathAsFunction23'
        inputfile: patient-example.json
        expression: Patient.gender.as(string1)
        error: true
        model: r5
      - desc: '** testFHIRPathAsFunction24'
        inputfile: patient-example.json
        expression: Patient.gender.ofType(string1)
        error: true
        model: r5
  - 'group: miscEngineTests':
      - desc: '** testContainedId'
        inputfile: patient-container-example.json
        expression: contained.id
        result:
          - '1'
        model: r5
      - desc: '** testMultipleResolve'
        inputfile: diagnosticreport-eric.json
        expression: >-
          composition.exists() implies
          (composition.resolve().section.entry.reference.where(resolve() is
          Observation) in (result.reference |
          result.reference.resolve().hasMember.reference))
        result:
          - true
        model: r5
        disable: true
  - 'group: cdaTests':
      - desc: '** testHasTemplateId1'
        inputfile: ccda.json
        expression: >-
          hasTemplateIdOf('http://hl7.org/cda/us/ccda/StructureDefinition/ContinuityofCareDocumentCCD')
        result:
          - true
        model: r5
      - desc: '** testHasTemplateId2'
        inputfile: ccda.json
        expression: >-
          ClinicalDocument.hasTemplateIdOf('http://hl7.org/cda/us/ccda/StructureDefinition/ContinuityofCareDocumentCCD')
        result:
          - true
        model: r5
      - desc: '** testHasTemplateId3'
        inputfile: ccda.json
        expression: >-
          recordTarget.patientRole.hasTemplateIdOf('http://hl7.org/cda/us/ccda/StructureDefinition/ContinuityofCareDocumentCCD')
        result:
          - false
        model: r5
    disable: true
